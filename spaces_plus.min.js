// ==UserScript==
// @name        	Spaces+
// @namespace   	https://github.com/crashmax-off/spaces_plus
// @description 	The script is designed to extend the functionality of Spaces.ru
// @author      	Creator: Maximoff, Updated: crashmax & molimawkа
// @include     	http://*.spaces.ru/*
// @include     	http://spaces.ru/*/*
// @include     	http://spaces.ru/*
// @include     	http://*.spaces.ru/*/*
// @include     	https://*.spaces.ru/*
// @include     	https://spaces.ru/*/*
// @include     	https://spaces.ru/*
// @include     	https://*.spaces.ru/*/*
// @match       	http://*.spaces.ru/*
// @match       	http://spaces.ru/*/*
// @match       	http://spaces.ru/*
// @match       	http://*.spaces.ru/*/*
// @match       	https://*.spaces.ru/*
// @match       	https://spaces.ru/*/*
// @match       	https://spaces.ru/*
// @match       	https://*.spaces.ru/*/*
// @version     	2.0
// @grant       	none
// ==/UserScript==

!function(){var e,o,i,t,n,s,a,r,l,c,p,d,_,u,b,g,m,k;e=document.location.protocol.toString(),o=null,i=null,t=null,n=null,s=0,a=0,r=0,l=0,c=0,p=-1,d=0,_=null,u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMEElEQVR42sVaCVRURxaNiWSfSXJOEo1RR4MZFzIqETegQQzRMZyZMRIVohgFFUWQHUGa7qYBUXFBFAwuQBABEUT2rbsBh01FHYk5xi1KHBfimjBGhK7cqfq90E3/bjSSpM+5h8/v+lX3vnrv1av6/cwzT/sB+s3NyXluQnKzGfvbW3O9tvTZZ/6wj0Ty7DRJdX++r+j9VwUxR96xi6odzsCu2T0jbfuzvv5Q4rZi2V/tI2uWTIus/lIQqaixF8svCMTyNnuJ4h4Dd83u0e9YG9aWPfO7C2FTr2tlSsTNTqKooCTbKfCEaOeepX3MiKt4hW+Mvvuo/VxzPU1avcJOLD+nS8hOrPhFIJaRxwFrq/+s/BzrUxMT3Gz0VXzoBqaDVDHZLlLRpB1YoiDUNbq4v084A3zPCiLlTWwMvrGfmjy1kJ99pEKpHVwiU/4KtzECmVIrhI4hkMj9nlqE7oP2YkWSdjBmtR4u0Bfg+qR9a/63FVV++etF6GQD2tl+jdWZ//Y18Z7gYkQ9GwJRZSal0O/JROgEDw2unT075cP02FpMi+Jmxyixj8UKzIttwKfRdZgm6j0+NMayDS9L1oh4rMDW5Hi7SJmvpjNe8pTs9PW1WFl1HSEnHiCg4Ue45Zzn7tnpCqHXn0UeQVrKbZRkdqFwXwd27LqGL2KPYpoJwapxa2jGksE6vChAl1uveZ4uPJM0AWvcbaqwvPIG1pwhegg59RBuuRfguLGOtpHDQViJxO3XULKP6KF0fxd27WqDe2wzHE24EycmolI5NeCgtel1QsfvqQWbNAHLS55abta2Bvj/5xGCviYGCKYIaP4ZbocuwyPuOPJTOlCcTnhRlN6FlD23sCT2GBzEPG6o5mATVnKMUnu2J1dD1xHJPLVTaCTbUIvArbgV/i3EJAJbuvDd1VycbaxDZfZPKEojRlG8T4mMvfexIvYkHHWEMA6cK4mqMDUo15vfldSKJkiKXqY+d06Tm41Z/6PNR+B9qhM+p4lJ7Pj2IpR314NQ/O9aIi42V6Ai80cUpipRmEL4kdaF1N334LOhBR+Ju9cJLqDXFp0fsUDyZ4NZ0CiyDS93616ojAQXtb7L4StYeYoYxYqTSiypvImshjzUn9jO4XorExKJn29sQktNPQ7vJaaRosSunTfhGFGlDmrVLEzyzfLQnwWd1CSIqKzozfenb6yBe+PPWHaSGIVr8U3MXFcNt6hCLKL4NLoMqeV78eiWCOSOEJ0/SKDIbUX+bmIShyi8JEdV7qTmNDUkX6aNBcZds0BMDs59nzZqNzUDVCDm5F3GkhPEJJzzr2KZOB+nw6PxrVCKaNE+rN6Ti/YbYSC3gzmcrS9BXjLpFYFhx7lZ5zhFVkMQXtY+btkWC+3ipklLNmHFHtol3Yj17dcpsLCpA27HiUm4Hr6AleI8XBGK0RYejv0RiVi9Owft1wNBbvlyOCWX4+BOYhLZOzqwYHUJJ0BVJ1X/wtxoovdXXtqUqpkBm7Ulu03lfTtRJZyyL8DlGDHA/KYuzKvv4OBS/xCiknIeAdlou+yPe9+vxs2LYcjedZcSVOLADmIUCdLLsPfP1WYkVSkuxyT/rDS2OuuWF/3okv1vkwsXtf6c2gf4rInowbmhiwq7AsctTZhJMWtrA9y2FWIVFdAaLuIEZFEBzhtK4Lkjl4N7fDHmRx9H9KYbyE4gvNi39SGWepfTzFNqsLBNDcproJy7U6mFV+KrdqKKC8YEsGlzTDuDfzUQAziV3cXH62ohpX5eEJGghVy4CTeEQk4AiwXd7xhWiA/Bc91ZZMYTXmwWXYaDby4dW2YgwCa04NJQp5VvaAWMW7HzXbuIqpvGBAgiZZgl/wmf1BMDzCy9g9lRVTgTHsWRfVxEiTLgGXMWGVuIAdI3dWKZTxUEYSW8pYVNaFHbKJfQYd010PJkczuJ/C6fAM4Ce7/GjDrCC8fiO/gkSo70iCQURWzTQqEzAy3CaL3vGMJEWVgefRbpccQAWyJa4eCTw808nwDb8JJ7f3OVjNIKGL942/vGBAikVAB1E4cjhB+VD2Cf1AKnzQosTcjCsoRMLI4/AG9xrl4MzNlQiIUbS+EsbeQwJ7IRvtGXkLaB6CElthMrvCnJsGKjxR0TMMZ5jUV3DCxaP5TugNp6CmDWt911GoIaJQUxDkUnko6n4t6ljznkVwUYZCGvpAxkJH2DnTEdWuyiZFNiiR7iI9ow0ztPz/cNXCis6IcRs33MtQKG2n7+hiCi3CCIbUUVmFp6H1OqiUk41LTj2nf/ALk6kUOBbJWBgEUbZUhe9xB7oolR7I5WwtuL7ifWFJksr61D8i8NGDvjbd1y7gU6ZXV6Ami+tYlvhJVCSUFMIuZYDsj3Y7UokHkaCJgnPY4kaSd2S4lRxIffwQyvg90LlxEBU/yzmyjnl3ULuf7WwXmpPTYRGJd4AuNlBOPlppF+MgakdZQWBVUe+EJcwAVynXADgkXZmC85iURJJ5IlhBdfirvgt7IBtmsKjW5NNQvZxFWpGZSzGcddXUr0s/JK8dbW3wxUgIW0FBZlHfigipiEsDEb5MpwLY42OGHB5ix8vj4XrrF5+GekHH7iViSJldgpIryIC7mFWSvyjFqfK3FoKcHqsXFumwIZZ71SYoxzqKVAVPmjzqETJgbl4i9xCrx/6A5GVigxspLwYlzVA5z+9u+U/LsclFcG4+rXlmhtmYBTtS7YLG1DvPARkoSEF4lCJXxXHoVdSIFR61PLc8UcDeCfRjgunaLyHkl/3XL6VeuQQwrdclogrMCEgCy8F7QfQ+LrMTz3NszLlRhRQQzgqDiHmjPO6PxuIMjlt9V4C5WpB7BjLTGJuOD7cPLMNWp9XU4TV++rpVxf09sKaOLA0n2bD/MxjRtpygib0EJ86Lcf7/l9hXe31mFIdhuGlXRiWBnRw4jyDnxa3YDS0wvQfvEd/LdxNBLC7mJ7KMH2MH4khCrh59kM2+DDpqyvdp8KfOAaxdynv/62Ur09e2mQ+RDr0KLzBltKJooTUgRL3wyY+6ZhYFwNBh34AYNLujCEktfFcBo3TqUVWLQ2EAtc8yH0PIctQR1IWEMMEBfYjtmehaatr+YyJSDnwosDhw3j3dirFb041n3LWnYWw9XePHsDJoStkhP8s2C+OhUDoqswIOM6BhV1YlAJUaG4C4Pij2FS0EHYBOZhmkca5rscROiyb7Ap4AHig5WID6ElQ9AjrHanO66AfBPWV3Rb3yVGzDjynw91K3pnSlBes8mtpY4Qq4Bsbkbekpbjzb0X8Vb6Vby58QjGBGZxMcSICYTlsA7Kgz0VMm/+AfgubEDIktPwcCmDw/JM7vvefT/9JOU2WHVYOvc5U6dyL5jPWDnbJrz0kcnTCd1yg9bskwNzMNo7FSO99uBD/0xVHd/jhI4Jsgk5DNtV+yFYng5r/4Mq8kZP6OjYNPNYhxY8Gjp98VzGjRaeZo9ztPj62EXrY1jOVbmSvPdDXRYntD0jyVfH6MeTTFVpmjpaVKXNX5hAC1fpBsap16PF7p0+N0WDLJcm7ecGimRnlPLf/GRan3wN4RatxfHZjAvH6bHf2qjigU3VcCvP5EL1TKBvX2ooTLoNG/NDj8RiyuE9josxv+/lBccLFOaW7gmZnK8yEdwLDvlv8IJDrnrBwcjTscYt3sosP4JxUK24v+KjfpCJGGbhKtlgG1rYoTne6CshOsS5vmzWFHSMmS/ayMZ8KvJ67mRh8TzzwyG2C10n+aQ1a9NetxDyJK+dVCu9nOgSZ32yvgfbfL6A83k25pO6janAtpgrYSLYScDo0fOE0sl+2ed1hHAQUFK9v2ZVFWWqmFIRZ32NnhcexWpKNgY31m/xMwR1DmYuNdDs5dctx8wJXmvltbvWes3h+4wIt4JrLK0hqUNWZX0Z2KpKc/t9K689tawP1hfr87HyfF/MhnqQlygGUIwcON7ByeKz0AhLj4RsK++vmljNMjXk0A1K8jYDu54SmHPByju9ibVhbdkz9NlR6j5e4vr8g34zwcT8WU2EBd5os9fenPD6MEv7tz+wm8HArtk99p26zQD1M2a//489eGaEZQoLSc7z6jjRzA77/cOf1HhFfc+MtWE7KS679IGf/x9lFv30I5KrAgAAAABJRU5ErkJggg==",b=new Object,g={comments:!1,comments_m2:!1,blogsd:!0,readersd:!0,favorite:!0,blocked:!1,rscroll:!1,hrightbar:!1,playerdn:!0,coins:!0,karma:!0,rurl:!1,fileTools:!0,darkMode:!1,gifts:!1,online:!0,ads:!0,myEvents:!0,friendsOn:!0,isOnline:!1,isOnlineInt:1,bodystyle:{url:"https://crashmax-off.github.io/bg/default.jpg",color:"#DAE1E8",urlchecked:!0,colorchecked:!1},events:{url:"https://crashmax-off.github.io/sn/default.ogg",volume:70,mail:!0,journal:!0,feed:!1,notifications:!1},friendsOnMax:10,friendsListSH:!0,hideNotyf:{cookieEditor:!1,isOnline:!1}},m={comments:"Пакетное удаление комментариев",blogsd:"Пакетное удаление блогов",readersd:"Пакетное удаление читателей",fileTools:"Дополнительные кнопки в блогах",darkMode:"Темная тема",friendsOn:"Панель друзей онлайн",myEvents:'Свой звук уведомлений <a href=\'#\' onclick=\'if(confirm("В настройках сайта должен быть выключен звук уведомлений. Файл должен быть в форматах *.ogg или *.mp3.\\nУказывайте прямую ссылку!\\n\\nХотите открыть каталог рингтонов?")) {window.open("https://crashmax-off.github.io/sn/", "_blank");} return false;\' style=\'cursor: help;\'><span class="ico" style="background-position: -234px -144px;"></span></a>',online:"Точное время онлайн в анкетах",ads:"Скрывать рекламу",favorite:"Возможность добавить пользователя в закладки",playerdn:"Кнопка загрузки трека из плеера",rscroll:"Скроллер страницы справа",hrightbar:"Скрытое правое меню",blocked:"Открытые разделы удаленных пользователей",coins:"Собирать бонусные монеты",karma:"Собирать карму",rurl:"Автоматический редирект внешних ссылок",bodystyle:"Задать фон сайта",gifts:"Предпросмотр подарков"},(k={ajax:function(e,o,i,t,n){n=void 0!==n?n:4;var s=new XMLHttpRequest;s.open(o,e,!0),"POST"==o?(s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(i)):s.send(null),s.onreadystatechange=function(){if(s.readyState==n){if(200!=s.status)return!1;t&&t(s.responseText)}}},jajax:function(e,o){e=e.replace(/\#.*$/i,"")+(e.indexOf("?")>=1?"&json=1":"?json=1");var i=new XMLHttpRequest;i.open("GET",e,!0),i.setRequestHeader("X-Proxy","spaces"),i.send(null),i.onreadystatechange=function(){return 4!=i.readyState?null:200!=i.status?null:void(o&&o(i.responseText))}},getQuery:function(e){var o=document.location.search,i=null;try{return e=e.toLowerCase(),o.toLowerCase().indexOf(e)>=1&&o.substring(1).split("&").forEach(function(o){var t=o.split("=");t[0].toLowerCase()==e&&(i=t[1])}),i}catch(e){return k.console.error("Ошибка (GETQUERY): "+e.name+":"+e.message+"\n"+e.stack),null}},css:function(e,o){var i=o.split(";");for(var t in i)if(""!=k.trim(i[t])){var n=k.trim(i[t]).split(":");n[0].indexOf("-")>=0&&(n[0]=n[0].replace(/\-([a-z]{1})/g,function(e,o){return o.toUpperCase()})),void 0!==n[1]&&(e.style[k.trim(n[0])]=k.trim(n[1]))}},htmlspecialchars:function(e){return"string"==typeof e&&(e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace("\n","br/>")),e},ce:function(e,o){var i=document.createElement(e);if(o)for(var t in o)if("style"==t)k.css(i,o[t]);else if("attr"==t)for(var n in o[t])i.setAttribute(n,o[t][n]);else"html"==t?i.innerHTML=o[t]:"class"==t?i.className=o[t]:i[t]=o[t];return i},readSettings:function(){var e=k.getCookie("SP_PLUS_SET");try{e&&(e=JSON.parse(e),g=k.extend(g,e))}catch(e){k.console.error("Ошибка (READSETTINGS): "+e.name+":"+e.message+"\n"+e.stack)}},newbequest:function(){var o=k.qs("#sp_newbequest_togl");o&&k.jajax(e+"//spaces.ru/mysite/",function(e){try{e&&(k.extend({owner_widget:{newbee_quest_widget:null}},JSON.parse(e)).owner_widget.newbee_quest_widget?o.style.display="":o.style.display="none")}catch(e){k.console.error("Ошибка (NEWBEE_JSON): "+e.name+":"+e.message+"\n"+e.stack)}})},settings:function(){var o=document.location.pathname.toString(),i=document.location.href.toString();if("/settings/"==o&&!k.qs("#SP_PLUS_SETLINK"))try{var t=k.find(document.links,{href:e+"//spaces.ru/settings/password/?"});if(t){t=t[0];var n=k.getQuery("sp_plus_settings"),a=k.getQuery("sp_cookie_editor"),r=k.getQuery("sp_isonline_editor"),l=k.ce("a",{href:e+"//spaces.ru/settings/?sp_plus_settings=1",id:"SP_PLUS_SETLINK",class:t.className,html:'<span>Настройки Spaces+</span><span class="ico ico_arr ico_m"></span>',onclick:function(o){var t=k.qs("#SP_PLUS_SETLINK").parentNode.parentNode.parentNode.parentNode,l=20..toString().split("").join(".");if("main"==t.id){var c=k.qs("#header_path");c&&(c.innerHTML=c.innerHTML.replace("Настройки",'<span id="SP_PLUS_SETHEAD2">Spaces+</span>')),t.innerHTML='<div class="widgets-group widgets-group_top js-container__block"><div class="b-title cl b-title_center b-title_first oh"><div class="b-title__item">Настройки Spaces+ <sup>'+l+'</sup><span class="js-cnt cnt cnt_title hide"></span></div></div><div class="content"><div class="list f-c_fll"> <div id="SP_PLUS_SETAREA" class="lh_160"></div></div></div></div> <a id="SP_PLUS_SETBACK" href="http://spaces.ru/settings/?" class="link-return full_link"><span class="ico ico_arrow-back"></span><span class="m">Назад</span></a>'}else"main"==t.className?t.innerHTML=t.firstElementChild.outerHTML.replace("Настройки",'Настройки <span style="color: #0000FF;">Spaces+</span>')+'<div class="start_page_padd light_blue_bg"><b id="SP_PLUS_SETHEAD">Настройки <span style="color: #0000FF;">Spaces+ '+l+'</span></b></div><div id="SP_PLUS_SETAREA"></div><a id="SP_PLUS_SETBACK" href="http://spaces.ru/settings/?" class="link-return full_link"><span class="ico ico_arrow-back"></span><span class="m">Назад</span></a>':k.alertmenu("<h4>Настройки <span>Spaces+ <sup>"+l+'</sup></span></h4><div id="SP_PLUS_SETAREA" style="text-align:left!important;line-height:1.5;display:block;height:100%;"></div>',1,1);var p=k.qs("#SP_PLUS_SETAREA");if(p){for(var d in g){if("bodystyle"==d){var _=k.ce("div",{class:"stnd-link"}),u=k.ce("input",{type:"text",value:g.bodystyle.url,class:"text-input",style:"width: 50%;",placeholder:"URL изображения"});u.onchange=u.oninput=function(e){if(k.isValidUrl(e.target.value)||""==e.target.value){e.target.style.backgroundColor="",g.bodystyle.url=k.trim(e.target.value);var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null),k.setStyle()}else e.target.style.backgroundColor="#FF7C7C"};var b=k.ce("input",{type:"color",value:g.bodystyle.color,placeholder:"Цвет фона"});b.onchange=b.oninput=function(e){if(/^\#([A-Za-z0-9]{3}|[A-Za-z0-9]{6})$/i.test(e.target.value)||""==e.target.value){e.target.style.backgroundColor="",g.bodystyle.color=k.trim(e.target.value);var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null),k.setStyle()}else e.target.style.backgroundColor="#FF7C7C"};var f=k.ce("input",{type:"checkbox",id:"sp_set_"+d+"_URL",checked:g.bodystyle.urlchecked,class:"sp_plus_checkbox_el",onclick:function(e){g.bodystyle.urlchecked=e.target.checked,e.target.checked&&h.checked&&(h.checked=!1,g.bodystyle.colorchecked=!1);var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null),k.setStyle()}}),h=k.ce("input",{type:"checkbox",id:"sp_set_"+d+"_color",checked:g.bodystyle.colorchecked,class:"sp_plus_checkbox_el",onclick:function(e){g.bodystyle.colorchecked=e.target.checked,e.target.checked&&f.checked&&(f.checked=!1,g.bodystyle.urlchecked=!1);var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null),k.setStyle()}}),x=k.ce("div",{class:"sp_plus_line",html:"<span class='sp_plus_text'>Фон сайта</span>"}),v=k.ce("span",{html:" - URL"}),y=k.ce("span",{html:' - Цвет <a href=\'#\' onclick=\'if(confirm("Указывайте прямую ссылку на картину!\\n\\nХотите открыть каталог фонов?")) {window.open("https://crashmax-off.github.io/bg/", "_blank");} return false;\' style=\'cursor: help;\'><span class="ico" style="background-position: -234px -144px;"></span></a>'}),S=k.ce("label",{attr:{for:"sp_set_"+d+"_URL"}}),w=k.ce("label",{attr:{for:"sp_set_"+d+"_color"}});p.appendChild(x),_.appendChild(f),_.appendChild(S),S.appendChild(u),S.appendChild(v),_.appendChild(h),_.appendChild(w),w.appendChild(b),w.appendChild(y),p.appendChild(_)}else if(void 0!==m[d])var N=k.ce("input",{id:"sp_set_"+d,type:"checkbox",class:"sp_plus_checkbox_el",checked:g[d],onclick:function(e){var o=e.target.id.split("_")[2];g[o]=e.target.checked;var i=JSON.stringify(g);if(k.setCookie("SP_PLUS_SET",i,null),"sp_set_rscroll"==e.target.id)k.scrollMove(e.target.checked);else if("sp_set_darkMode"==e.target.id)if(k.darkMode(e.target.checked),e.target.checked)k.darkModeNav(e.target);else{var t=k.qs("#SP_DARKMODE_WRAP");t&&k.remove(t)}else if("sp_set_hrightbar"==e.target.id)k.hiddenRightbar(e.target.checked);else if("sp_set_debug"==e.target.id)e.target.checked?k.console.debug("[S+] Запустили консоль!"):k.console.remove();else if("sp_set_myEvents"==e.target.id)if(e.target.checked)k.evenstSupport(e.target);else{s=0;var n=k.qs("#SP_PLUS_EVENTS");n&&k.remove(n)}else if("sp_set_friendsOn"==e.target.id)if(k.friendsOnline(e.target.checked),e.target.checked)k.setFriend(e.target);else{var a=k.qs("#SP_PLUS_MAXFRIENDS");a&&k.remove(a)}else if("sp_set_comments"==e.target.id)if(e.target.checked)k.comments2m(e.target);else{var r=k.qs("#SP_C2M_WRAP");r&&k.remove(r)}}}),C=k.ce("label",{html:m[d],attr:{for:"sp_set_"+d}}),L=k.ce("label",{class:"stnd-link"});void 0!==m[d]&&(L.appendChild(N),L.appendChild(C),p.appendChild(L),p.appendChild(L))}g.friendsOn&&k.setFriend(k.qs("#sp_set_friendsOn")),g.comments&&k.comments2m(k.qs("#sp_set_comments")),g.darkMode&&k.darkModeNav(k.qs("#sp_set_darkMode")),g.myEvents&&k.evenstSupport(k.qs("#sp_set_myEvents"));var P=k.ce("div",{class:"sp_plus_line",html:"<span class='sp_plus_text'>Встроенные возможности сайта</span>"}),E=k.ce("div",{class:"sp_plus_line",html:"<span class='sp_plus_text'>Дополнительные функции</span>"});p.appendChild(P),k.spacesAction(p),k.newbequest(),p.appendChild(E);var T=k.ce("a",{href:("http:"==e?"https:":"http:")+"//spaces.ru/settings/?sp_plus_settings=1",class:"stnd-link stnd-link_arr",id:"sp_protocol_togl",html:"<span class='b'><span class='"+("http:"==e?"ico ico_locked":"ico_chat ico_lock_open")+"'></span> Переключиться на "+("http:"==e?"HTTPS":"HTTP")+"-протокол<span class='ico ico_arr ico_m'></span></span>",style:"font-size: small;",onclick:function(){return document.location.href=("http:"==e?"https:":"http:")+"//spaces.ru/settings/?sp_plus_settings=1",!1}});p.appendChild(T);var A=k.ce("a",{href:e+"//spaces.ru/settings/?sp_plus_settings=1&sp_cookie_editor=1",class:"stnd-link stnd-link_arr",id:"sp_cookie_editor",html:"<span class='b'><span class='ico ico_edit_dim'></span> Редактор Cookies<span class='ico ico_arr ico_m'></span></span>",style:"font-size: small;",onclick:function(){var o=k.qs("#SP_PLUS_SETHEAD"),t=k.qs("#SP_PLUS_SETHEAD2"),s=k.qs("#SP_PLUS_SETBACK");return o&&(o.innerHTML='<a href="http://spaces.ru/settings/?sp_plus_settings=1">Spaces+</a><span class="location-bar__sep ico"></span> Редактор cookies'),t&&(t.innerHTML='<a href="http://spaces.ru/settings/?sp_plus_settings=1">Spaces+</a><span class="location-bar__sep ico"></span> Редактор cookies'),s&&(s.href=e+"//spaces.ru/settings/?sp_plus_settings=1"),/(\?|&)sp_cookie_editor=1/i.test(i)||k.historyPush({sp_plus_settings:n,sp_cookie_editor:a},e+"//spaces.ru/settings/?sp_plus_settings=1&sp_cookie_editor=1","Spaces+: Редактор Cookies"),k.cookieEditor("#SP_PLUS_SETAREA"),!1}});p.appendChild(A);var O=k.ce("a",{href:e+"//spaces.ru/settings/?sp_plus_settings=1&sp_isonline_editor=1",class:"stnd-link stnd-link_arr",id:"sp_isonline_editor",html:"<span class='b'><span class='ico ico_speaker'></span>Проверка онлайна<span class='ico ico_arr ico_m'></span></span>",style:"font-size: small;",onclick:function(){if("Notification"in window)if("granted"===Notification.permission.toLowerCase()){var o=k.qs("#SP_PLUS_SETHEAD"),t=k.qs("#SP_PLUS_SETHEAD2"),s=k.qs("#SP_PLUS_SETBACK");o&&(o.innerHTML='<span style="color: #0000FF;">Spaces+</span>: проверка онлайна'),t&&(t.innerHTML='<a href="http://spaces.ru/settings/?sp_plus_settings=1">Spaces+</a><span class="location-bar__sep ico"></span> Проверка онлайна'),s&&(s.href=e+"//spaces.ru/settings/?sp_plus_settings=1"),/(\?|&)sp_isonline_editor=1/i.test(i)||k.historyPush({sp_plus_settings:n,sp_isonline_editor:r},e+"//spaces.ru/settings/?sp_plus_settings=1&sp_isonline_editor=1","Spaces+: проверка онлайна"),k.isOnlineSetting("#SP_PLUS_SETAREA")}else"denied"!==Notification.permission.toLowerCase()?Notification.requestPermission(function(o){if("granted"===o.toLowerCase()){var t=k.qs("#SP_PLUS_SETHEAD"),s=k.qs("#SP_PLUS_SETHEAD2"),a=k.qs("#SP_PLUS_SETBACK");t&&(t.innerHTML='<span style="color: #0000FF;">Spaces+</span>: проверка онлайна'),s&&(s.innerHTML='<span style="color: #0000FF;">Spaces+</span>: проверка онлайна'),a&&(a.href=e+"//spaces.ru/settings/?sp_plus_settings=1"),/(\?|&)sp_isonline_editor=1/i.test(i)||k.historyPush({sp_plus_settings:n,sp_isonline_editor:r},e+"//spaces.ru/settings/?sp_plus_settings=1&sp_isonline_editor=1","Spaces+: проверка онлайна"),k.isOnlineSetting("#SP_PLUS_SETAREA")}else k.alertm("Разрешите браузеру показывать уведомления с сайта Spaces.ru, чтобы пользоваться функцией!",1,null)}):k.alertm("Вы <b style='color: #800;'>запретили</b> показывать уведомления для сайта Spaces.ru!<br/>Зайдите в настройки браузера и настройте доступ.",1,null);else k.alertm("Ваш браузер не поддерживает уведомления!",1,null);return!1}});p.appendChild(O);var M=k.ce("a",{href:"#",class:"stnd-link stnd-link_arr",id:"sp_plus_reset",html:"<span class='b' style='color: #f86934;'><span class='ico ico_alert'></span> Сброс настроек<span class='ico ico_arr ico_m'></span></span>",style:"font-size: small;",onclick:function(){return k.confirmm("Сбросить <b style='color: #F00;'>ВСЕ</b> настройки скрипта?",function(){k.delCookie("SP_PLUS_SET"),document.location.reload()}),!1}});p.appendChild(M),/(\?|&)sp_plus_settings=1/i.test(i)||k.historyPush({sp_plus_settings:n},e+"//spaces.ru/settings/?sp_plus_settings=1","Настройки Spaces+")}return!1}});if(k.inBefore(l,t),"BR"==t.nextElementSibling.nodeName&&k.insertAfter(k.ce("br",null),l),n){document.title="Настройки Spaces+";var c=document.createEvent("MouseEvent");if(c.initEvent("click",!0,!0),l.dispatchEvent(c),/#([da-z0-9\_]+)$/i.test(i)){var p=/#([da-z0-9\_]+)$/i.exec(i)[0],d=k.qs(p);d&&("#sp_protocol_togl"==p||"#sp_plus_reset"==p||"#sp_cookie_editor"==p||"#wrap_spaces_option"==p?d.style.backgroundColor="#FFC107":d.nextElementSibling.style.backgroundColor="#FFC107",setTimeout(function(){window.scrollTo(0,d.offsetTop)},100))}else if(a)document.title="Spaces+: Редактор Cookies",(_=document.createEvent("MouseEvent")).initEvent("click",!0,!0),k.qs("#sp_cookie_editor").dispatchEvent(_);else if(r){var _;document.title="Spaces+: проверка онлайна",(_=document.createEvent("MouseEvent")).initEvent("click",!0,!0),k.qs("#sp_isonline_editor").dispatchEvent(_)}}}}catch(e){k.console.error("Ошибка (SETTINGS): "+e.name+":"+e.message+"\n"+e.stack)}},notifications:function(e,o,i){try{"Notification"in window?"granted"===Notification.permission.toLowerCase()?k.notificationShow(e,o,i):"denied"!==Notification.permission.toLowerCase()?Notification.requestPermission(function(t){"granted"===t.toLowerCase()?k.notificationShow(e,o,i):k.alertm("Вы <b style='color: #800;'>запретили</b> показывать уведомления для сайта Spaces.ru!<br/>Зайдите в настройки браузера и настройте доступ.",1,null)}):k.alertm("Разрешите браузеру показывать уведомления с сайта Spaces.ru, чтобы пользоваться функцией!",1,null):k.alertm("Ваш браузер не поддерживает уведомления!",1,null)}catch(e){k.console.error("Ошибка (NOTIFICATIONS): "+e.name+":"+e.message+"\n"+e.stack)}},notificationShow:function(e,o,i){try{var t=new Notification(e,o);null!=i&&(t.onclick=function(e){e.preventDefault(),k.setLocation(i),e.target.close()})}catch(e){k.console.error("Ошибка (NOTIFICATION_SHOW): "+e.name+":"+e.message+"\n"+e.stack)}},isOnlineSupport:function(e){try{_&&e&&(clearInterval(_),_=null),!_&&g.isOnline&&(e||k.isOnline(b),_=setInterval(function(){k.isOnline(b)},6e4*g.isOnlineInt))}catch(e){k.console.error("Ошибка (ISONLINE_SUPPORT): "+e.name+":"+e.message+"\n"+e.stack)}},isOnline:function(o){try{var i=new Array;for(var t in o)i.push(t);var n=i.length;if(n>0)var s=setInterval(function(){n--,k.jajax(e+"//spaces.ru/anketa/?user="+i[n],function(i){if(i)try{var t=k.extend({user_widget:{is_online:null,name:null,photo_widget:{previewURL:null}}},JSON.parse(i));if(t.user_widget.name){var n=t.user_widget.name;if(k.console.info("Проверка онлайна: "+n),"1"==t.user_widget.is_online&&o[n]&&"off"==o[n]){var s;s=t.user_widget.photo_widget.previewURL&&/\.p\.\d+\.\d+\.\d+.*?jpg\?\d+$/i.test(t.user_widget.photo_widget.previewURL)?t.user_widget.photo_widget.previewURL.replace(/\.p\.\d+\.\d+\.(\d+)(.*?)jpg\?(\d+)$/i,".p.40.40.$1$2jpg?$3"):u,k.notifications(t.user_widget.name+" онлайн!",{body:"Пользователь "+t.user_widget.name+" появился в сети!",icon:s,tag:t.user_widget.name},e+"//spaces.ru/mysite/?name="+t.user_widget.name),b[t.user_widget.name]="on";var a=JSON.stringify(b);k.setCookie("SP_PLUS_ONLINE",a,null)}else 0==t.user_widget.is_online&&o[n]&&"on"==o[n]&&(b[t.user_widget.name]="off",a=JSON.stringify(b),k.setCookie("SP_PLUS_ONLINE",a,null))}}catch(e){k.console.error("Ошибка (JSON_ISONLINE): "+e.name+":"+e.message+"\n"+e.stack)}}),n<1&&clearInterval(s)},1e3)}catch(e){k.console.error("Ошибка (ISONLINE): "+e.name+":"+e.message+"\n"+e.stack)}},isOnlineSetting:function(o){window.scrollTo(0,0);var i=k.qs(o);if(i)try{if(i.innerHTML="",!g.hideNotyf.isOnline){var t=k.ce("img",{class:"p16 m pointer right",style:"padding: 10px;",src:e+"//spac.me/i/remove.png",title:"Понятно, больше не показывать.",onclick:function(e){g.hideNotyf.isOnline=!0;var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null),k.isOnlineSetting("#SP_PLUS_SETAREA")}}),n=k.ce("div",{class:"stnd-block-yellow",style:"padding: 15px;",html:'Вы можете добавить здесь аккаунты, о онлайне которых нужно оповещать, а также частоту проверки.<br /><span class="ico ico_alert"></span><b style="color: #F00;">Внимание!</b> <b>Функция потребляет трафик в фоновом режиме!</b>'}),s=k.ce("div",null);s.appendChild(t),i.appendChild(s),s.appendChild(n),i.appendChild(k.ce("br",null))}var a=k.ce("div",{class:"content-bl__sep",style:"padding: 10px;",html:'<label class="label" style="margin-top: -7px;margin-bottom: 2px; text-align: left;">Настройки:</label>'}),r=k.ce("input",{id:"sp_set_isOnline",type:"checkbox",class:"sp_plus_checkbox_el",checked:g.isOnline,onclick:function(e){g.isOnline=e.target.checked;var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null),k.isOnlineSupport(1)}}),l=k.ce("label",{html:" - включить функцию",attr:{for:"sp_set_isOnline"}}),c=k.declOfNum(k.isInteger(g.isOnlineInt)?g.isOnlineInt:3,["минута.","минуты.","минут."]),p=k.ce("span",{style:"color: #808080; margin-left: 7px; font-size: small",html:"Интервал проверки: "+g.isOnlineInt+" "+c}),d=k.ce("input",{type:"range",min:1,max:60,step:1,value:g.isOnlineInt});d.onchange=d.oninput=function(e){if(!isNaN(e.target.value)){var o=parseInt(e.target.value,10);(o<1||o>60)&&(o=1);var i=k.declOfNum(k.isInteger(o/2)?o/2:3,["минута.","минуты.","минут."]);p.innerHTML="Интервал проверки: "+(o/2).toFixed(1)+" "+i,g.isOnlineInt=o/2;var t=JSON.stringify(g);k.setCookie("SP_PLUS_SET",t,null),k.isOnlineSupport(1)}};var _=1,m=k.ce("a",{class:"sp_plus_a",html:"Тест уведомления",href:"#",onclick:function(e){return k.notifications("Тестовое уведомление #"+_+"!",{body:"Текст уведомления #"+_+".",icon:u,tag:"test"},null),_++,!1}});a.appendChild(r),a.appendChild(l),a.appendChild(k.ce("br",null)),a.appendChild(d),a.appendChild(k.ce("br",null)),a.appendChild(p),a.appendChild(k.ce("br",null)),a.appendChild(m),i.appendChild(a);var f=k.ce("div",{class:"content-bl__sep",style:"padding: 10px;",html:'<label class="label" style="margin-top: 7px; margin-bottom: 2px; text-align: left;">Добавить пользователя:</label>'}),h=k.ce("input",{type:"text",class:"text-input",placeholder:"Ник пользователя",style:"width: 60%; margin: 3px;"});h.onchange=h.oninput=function(e){/^[A-Za-z0-9\_]+$/i.test(e.target.value)||""==k.trim(e.target.value)?e.target.style.backgroundColor="":e.target.style.backgroundColor="#FF7C7C"};var x=k.ce("button",{html:"<span class='sp_plus_ico_okb'></span> Добавить",class:"black",style:"max-width: 30%; margin: 3px; padding: 5px 3px 3px 7px; font-size: 14px;",onclick:function(e){var o="SPAN"==e.target.nodeName?e.target.parentNode.previousElementSibling:e.target.previousElementSibling,i=k.htmlspecialchars(k.trim(o.value));/^[A-Za-z0-9\_]+$/i.test(i)&&""!=k.trim(i)?b[i]?k.alertm("Пользователь <span style='color: #0000FF;'>\""+i+'"</span> уже есть в списке!',1,null):""!=i?k.confirmm("Хотите добавить пользователя <span style='color: #0000FF;'>\""+i+'"</span> в список?',function(){b[i]="off";var e=JSON.stringify(b);k.setCookie("SP_PLUS_ONLINE",e,null),k.isOnlineSetting("#SP_PLUS_SETAREA")}):k.alertm("Задайте ник пользователя!",1,null):k.alertm("Ник пользователя должен состоять из латинских букв, цифр и символа подчёркивания!",1,null)}});for(var v in f.appendChild(h),f.appendChild(x),i.appendChild(f),i.appendChild(k.ce("div",{html:'<label class="label" style="margin-bottom: 2px; padding: 10px; text-align: left;">Список пользователей:</label>'})),b){var y=k.ce("div",{style:"padding-left: 10px; padding-bottom: 10px;"}),S=k.ce("a",{href:e+"//spaces.ru/mysite/?name="+v,class:"sp_plus_a",html:v,style:"margin-right: 12px;"}),w=k.ce("a",{html:"<span class='sp_plus_ico_del'></span>",title:"Удалить",href:"#",onclick:function(e){var o="SPAN"==e.target.nodeName?e.target.parentNode.previousElementSibling:e.target.previousElementSibling,i=k.htmlspecialchars(k.trim(o.innerHTML));return b[i]?""!=i?k.confirmm("Хотите удалить пользователя <span style='color: #0000FF;'>\""+i+'"</span> из списка?',function(){delete b[i];var e=JSON.stringify(b);k.setCookie("SP_PLUS_ONLINE",e,null),k.isOnlineSetting("#SP_PLUS_SETAREA")}):k.alertm("Ошибка удаления!",1,null):k.alertm("Пользователя <span style='color: #0000FF;'>\""+i+'"</span> нет в списке!',1,null),!1}});y.appendChild(S),y.appendChild(w),i.appendChild(y)}}catch(e){k.console.error("Ошибка (ISONLINE_SETTINGS): "+e.name+":"+e.message+"\n"+e.stack)}},comments2m:function(e){try{var o=k.ce("div",{id:"SP_C2M_WRAP",style:"padding-left: 7px; margin-left: 7px; border-left: 5px solid #92BEE2;"}),i=k.ce("input",{type:"checkbox",id:"sp_comments_m2",class:"sp_plus_checkbox_el",checked:g.comments_m2,onclick:function(e){g.comments_m2=e.target.checked;var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null)}}),t=k.ce("label",{attr:{for:"sp_comments_m2"},html:" - альтернативный метод (если не работает основной)",style:"font-size: small;"});o.appendChild(i),o.appendChild(t),k.insertAfter(o,e.nextElementSibling)}catch(e){k.console.error("Ошибка (C2M_SUPPORT): "+e.name+":"+e.message+"\n"+e.stack)}},setFriend:function(e){try{var o=k.ce("div",{id:"SP_PLUS_MAXFRIENDS",style:"padding-left: 7px; margin-left: 7px; border-left: 5px solid #92BEE2;"}),i=k.ce("input",{type:"number",class:"text-input",style:"width: 8%;",min:1,max:15,step:1,size:3,placeholder:"1 - 15",value:g.friendsOnMax});i.onchange=i.oninput=function(e){if(!isNaN(e.target.value)){var o=parseInt(e.target.value,10);(o>15||o<1)&&(o=10),a=0,g.friendsOnMax=o;var i=JSON.stringify(g);k.setCookie("SP_PLUS_SET",i,null),k.friendsOnline(1)}};var t=k.ce("span",{html:" - максимум друзей (1 - 15).",style:"color: #808080; font-size: small;"}),n=k.ce("input",{type:"checkbox",id:"sp_friends_list_sh",class:"sp_plus_checkbox_el",checked:g.friendsListSH,onclick:function(e){g.friendsListSH=e.target.checked;var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null)}}),s=k.ce("label",{attr:{for:"sp_friends_list_sh"},html:" - скрывать/показывать по клику на счётчике.",style:"font-size: small;"});o.appendChild(i),o.appendChild(t),o.appendChild(k.ce("br",null)),o.appendChild(n),o.appendChild(s),k.insertAfter(o,e.nextElementSibling)}catch(e){k.console.error("Ошибка (FRIENDS_MAX_SUPPORT): "+e.name+":"+e.message+"\n"+e.stack)}},evenstSupport:function(e){try{var o=k.ce("div",{id:"SP_PLUS_EVENTS",style:"padding-left: 7px; margin-left: 7px; border-left: 5px solid #92BEE2;"}),i=k.ce("input",{type:"checkbox",id:"sp_event_notif",class:"sp_plus_checkbox_el",checked:g.events.notifications,onclick:function(e){if(!("Notification"in window))return k.alertm("Ваш браузер не поддерживает уведомления!",1,null),!1;if("granted"===Notification.permission.toLowerCase()){g.events.notifications=e.target.checked;var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null)}else{if("denied"===Notification.permission.toLowerCase())return k.alertm("Вы <b style='color: #800;'>запретили</b> показывать уведомления для сайта Spaces.ru!<br/>Зайдите в настройки браузера и настройте доступ.",1,null),!1;Notification.requestPermission(function(o){if("granted"!==o.toLowerCase())return k.alertm("Разрешите браузеру показывать уведомления с сайта Spaces.ru, чтобы пользоваться функцией!",1,null),!1;g.events.notifications=e.target.checked;var i=JSON.stringify(g);k.setCookie("SP_PLUS_SET",i,null)})}}}),t=k.ce("label",{attr:{for:"sp_event_notif"},html:" - уведомления в браузере.",style:"font-size: small;"}),n=k.ce("input",{type:"url",value:g.events.url,class:"text-input",style:"width: 80%",placeholder:"https://example.com/sound.ogg"});n.onchange=n.oninput=function(e){if(k.isValidUrl(e.target.value)&&/\.(ogg|mp3)$/i.test(e.target.value)||""==k.trim(e.target.value)){g.events.url=k.trim(e.target.value);var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null)}else e.target.style.backgroundColor="#FF7C7C"};var s=k.ce("a",{href:"#",html:'<span class="ico ico_play"></span>',style:"margin-left: 7px; font-size: small",title:"Прослушать",onclick:function(e){return k.sound(g.events.url+"?r="+k.rand(1e3,9999),g.events.volume),!1}}),a=k.ce("span",{style:"color: #808080; margin-left: 7px; font-size: small",html:g.events.volume+"%"}),r=k.ce("input",{type:"range",min:0,max:100,step:1,value:g.events.volume});r.onchange=r.oninput=function(e){if(!isNaN(e.target.value)){var o=parseInt(e.target.value,10);(o<0||o>100)&&(o=70),a.innerHTML=o+"%",g.events.volume=o;var i=JSON.stringify(g);k.setCookie("SP_PLUS_SET",i,null)}};var l=k.ce("input",{type:"checkbox",id:"sp_event_mail",class:"sp_plus_checkbox_el",checked:g.events.mail,onclick:function(e){g.events.mail=e.target.checked;var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null)}}),c=k.ce("label",{attr:{for:"sp_event_mail"},html:" - уведомлять о почте.",style:"font-size: small;"}),p=k.ce("input",{type:"checkbox",id:"sp_event_journal",class:"sp_plus_checkbox_el",checked:g.events.journal,onclick:function(e){g.events.journal=e.target.checked;var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null)}}),d=k.ce("label",{attr:{for:"sp_event_journal"},html:" - уведомлять о журнале.",style:"font-size: small;"}),_=k.ce("input",{type:"checkbox",id:"sp_event_feed",class:"sp_plus_checkbox_el",checked:g.events.feed,onclick:function(e){g.events.feed=e.target.checked;var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null)}}),u=k.ce("label",{attr:{for:"sp_event_feed"},html:" - уведомлять о ленте.",style:"font-size: small;"});o.appendChild(i),o.appendChild(t),o.appendChild(k.ce("br",null)),o.appendChild(n),o.appendChild(s),o.appendChild(k.ce("br",null)),o.appendChild(r),o.appendChild(a),o.appendChild(k.ce("br",null)),o.appendChild(l),o.appendChild(c),o.appendChild(k.ce("br",null)),o.appendChild(p),o.appendChild(d),o.appendChild(k.ce("br",null)),o.appendChild(_),o.appendChild(u),o.appendChild(k.ce("br",null)),k.insertAfter(o,e.nextElementSibling)}catch(e){k.console.error("Ошибка (EVENTS_SUP): "+e.name+":"+e.message+"\n"+e.stack)}},historyPush:function(e,o,i){try{document.title=i,history.pushState(e,i,o)}catch(e){k.console.error("Ошибка (HISTORY): "+e.name+":"+e.message+"\n"+e.stack)}},remove:function(e){return e.parentNode.removeChild(e)},isInteger:function(e){return(0^e)===e},wrap:function(e,o){return o=o||k.ce("div",null),e.nextSibling?k.inBefore(o,e.nextSibling):e.parentNode.appendChild(o),o.appendChild(e)},is_array:function(e){return e instanceof Array},scrollMove:function(e){try{var o=k.qs("#scroll_page");o&&!o.hasAttribute("sp-replace")&&e?(o.style.left="auto",o.style.right="0",o.setAttribute("sp-replace","1")):!g.rscroll&&o&&o.hasAttribute("sp-replace")&&!e&&(o.style.left="0",o.style.right="auto",o.removeAttribute("sp-replace"))}catch(e){k.console.error("Ошибка (SCROLLER): "+e.name+":"+e.message+"\n"+e.stack)}},hiddenRightbar:function(e){try{var o=k.qs("#page_rightbar");o&&!o.hasAttribute("sp-hidden-rightbar")&&e?(o.style.display="none",o.setAttribute("sp-hidden-rightbar","1")):!g.hrightbar&&o&&o.hasAttribute("sp-hidden-rightbar")&&!e&&(o.style.display="block",o.removeAttribute("sp-hidden-rightbar"))}catch(e){k.console.error("Ошибка (HRIGHTBAT): "+e.name+":"+e.message+"\n"+e.stack)}},cookieEditor:function(o){window.scrollTo(0,0);var i=k.allCookie(),t=k.qs(o);if(t)try{if(t.innerHTML="",!g.hideNotyf.cookieEditor){var n=k.ce("img",{class:"p16 m pointer right",style:"padding: 10px;",src:e+"//spac.me/i/remove.png",title:"Понятно, больше не показывать.",onclick:function(e){g.hideNotyf.cookieEditor=!0;var o=JSON.stringify(g);k.setCookie("SP_PLUS_SET",o,null),k.cookieEditor("#SP_PLUS_SETAREA")}}),s=k.ce("div",{class:"stnd-block-yellow",style:"padding: 15px;",html:'<span class="ico ico_alert"></span>Никому не сообщайте значения ваших cookies! Не делайте скриншот этой страницы, на котором будут видны эти значения! От этого зависит безопасность вашего аккаунта!'}),a=k.ce("div",{style:"none"});a.appendChild(n),t.appendChild(a),a.appendChild(s)}var r=k.ce("div",{style:"text-align: center; padding-top: 10px;"}),l=k.ce("input",{type:"text",class:"text-input",placeholder:"Имя",style:"width: 30%; margin: 3px;"}),c=k.ce("input",{type:"text",class:"text-input",placeholder:"Значение",style:"width: 30%; margin: 3px;"}),p=k.ce("button",{html:'<span class="sp_plus_ico_okb"></span> Добавить',class:"black",style:"max-width: 30%; margin: 3px; padding: 5px 3px 3px 7px; font-size: 14px;",onclick:function(e){var o="SPAN"==e.target.nodeName?e.target.parentNode.previousElementSibling:e.target.previousElementSibling,i=k.htmlspecialchars(k.trim(o.previousElementSibling.value)),t=k.htmlspecialchars(k.trim(o.value));"SP_KEY_IMPORT"==i||"SP_PLUS_SET"==i?k.alertm("Это служебное значение скрипта, не изменяйте его!",1,null):""!=i?k.confirmm(("SP_KEY_IMPORT"==i||"SP_PLUS_SET"==i?"<b style='color: #FF0000;'>Внимание, <span style='color: #0000FF;'>\""+i+'"</span> является служебным значение скрипта, не стоит его изменять!</b><br/>':"")+"Хотите добавить куку <span style='color: #0000FF;'>\""+i+"\"</span> со значением <span style='color: #0000FF;'>\""+t+'"</span>?',function(){k.setCookie(o.previousElementSibling.value,o.value,null),k.cookieEditor("#SP_PLUS_SETAREA")}):k.alertm("Задайте имя cookie!",1,null)}});for(var d in r.appendChild(l),r.appendChild(c),r.appendChild(p),t.appendChild(r),t.appendChild(k.ce("div",{class:"sp_plus_line",html:'<span class="sp_plus_text">Список существующий cookies</span>'})),i)if("SP_KEY_IMPORT"!=d&&"SP_PLUS_SET"!=d){var _=k.ce("div",{class:"text-input__wrap",style:"text-align: center;"}),u=k.ce("input",{type:"text",class:"text-input",placeholder:"Имя",attr:{readonly:"readonly"},value:d,style:"width: 30%; margin: 3px;",onclick:function(e){e.target.select()}}),b=k.ce("input",{type:"text",class:"text-input",placeholder:"Значение",value:i[d],style:"width: 30%; margin: 3px;"}),m=k.ce("button",{html:"<span class='sp_plus_ico_del'></span>",title:"Удалить",style:"max-width: 15%; margin: 3px; padding: 5px 3px 3px 7px; font-size: 14px;",onclick:function(e){var o="SPAN"==e.target.nodeName?e.target.parentNode.previousElementSibling.previousElementSibling:e.target.previousElementSibling.previousElementSibling,i=k.htmlspecialchars(k.trim(o.value));"SP_KEY_IMPORT"==i||"SP_PLUS_SET"==i?k.alertm("Это служебное значение скрипта, не удаляйте его!",1,null):""!=i?k.confirmm(("SP_KEY_IMPORT"==i||"SP_PLUS_SET"==i?"<b style='color: #FF0000;'>Внимание, <span style='color: #0000FF;'>\""+i+'"</span> является служебным значение скрипта, не стоит его удалять!</b><br/>':"")+"Хотите удалить куку <span style='color: #0000FF;'>\""+i+'"</span>?',function(){k.delCookie(o.value),k.cookieEditor("#SP_PLUS_SETAREA")}):k.alertm("Пустую куку удалить?! Ты, блять, серьёзно???",1,null)}}),f=k.ce("button",{title:"Сохранить",html:"<span class='sp_plus_ico_okb'></span>",style:"max-width: 15%; margin: 3px; padding: 5px 3px 3px 7px; font-size: 14px;",onclick:function(e){var o="SPAN"==e.target.nodeName?e.target.parentNode.previousElementSibling.previousElementSibling:e.target.previousElementSibling.previousElementSibling,i=k.htmlspecialchars(k.trim(o.previousElementSibling.value)),t=k.htmlspecialchars(k.trim(o.value));"SP_KEY_IMPORT"==i||"SP_PLUS_SET"==i?k.alertm("Это служебное значение скрипта, не изменяйте его!",1,null):""!=i?k.confirmm(("SP_KEY_IMPORT"==i||"SP_PLUS_SET"==i?"<b style='color: #FF0000;'>Внимание, <span style='color: #0000FF;'>\""+i+'"</span> является служебным значение скрипта, не стоит его изменять!</b><br/>':"")+"Хотите задать куке <span style='color: #0000FF;'>\""+i+"\"</span> значение <span style='color: #0000FF;'>\""+t+'"</span>?',function(){k.setCookie(o.previousElementSibling.value,o.value,null),k.cookieEditor("#SP_PLUS_SETAREA")}):k.alertm("Имя не должно быть пустым!",1,null)}});_.appendChild(u),_.appendChild(b),_.appendChild(m),_.appendChild(f),t.appendChild(_)}}catch(e){k.console.error("Ошибка (COOKIE_EDITOR): "+e.name+":"+e.message+"\n"+e.stack)}},spacesAction:function(o){var i=k.ce("div",{id:"wrap_spaces_option"}),t=k.ce("a",{href:'javascript:var Arr=[\'<div class="time-block" style="text-align: left;" id="wrap_spacesAction_AD"><a href="#" id="api_debug-button">API-Debugger</a><div id="api_debug-place"></div></div>\',"append","parent","#navi","debugger"];$(Arr[3])[Arr[2]]()[Arr[1]](Arr[0]),require(Arr[4]);void(0);',class:"stnd-link stnd-link_arr",id:"sp_spacesAction_AD",html:"<span class='b'><span class='ico ico_settings'></span> API-Отладчик<span class='ico ico_arr ico_m'></span></span>",style:"font-size: small;",onclick:function(e){var o=k.qs("#wrap_spacesAction_AD");return!o||(k.remove(o),k.setLocation(document.location.href),!1)}}),n=k.getCookie("beta"),s=k.ce("a",{href:"#",class:"stnd-link stnd-link_arr",id:"sp_spacesAction_beta",html:n?"<span class='b'><span class='ico ico_exit'></span> Выйти из песочницы<span class='ico ico_arr ico_m'></span></span>":"<span class='b'><span class='ico ico_enter_grey'></span> Beta-песочница<span> - открытое тестирование нововведений сайта<span class='ico ico_arr ico_m'></span></span></span>",style:"font-size: small;",onclick:function(e){return n?k.delCookie("beta"):k.setCookie("beta","1",null),document.location.reload(),!0}}),a=k.getCookie("force_ajax_transport"),r=k.ce("a",{href:"#",class:"stnd-link stnd-link_arr",id:"sp_spacesFAT",html:a?"<span class='b'><span class='ico' style='background-image: url(\"//spac.me/i/remove.png\");'></span> Убрать полосу загрузки<span class='ico ico_arr ico_m'></span></span>":"<span class='b'><span class='ico ico_ok_grey'></span> Добавить ajax полосу загрузки страницы<span class='ico ico_arr ico_m'></span><span>",style:"font-size: small;",onclick:function(e){return a?k.delCookie("force_ajax_transport"):k.setCookie("force_ajax_transport","1",null),document.location.reload(),!0}}),l=k.getCookie("gp_left_btn"),c=k.ce("a",{href:"#",class:"stnd-link stnd-link_arr",id:"sp_spacesGLB",html:l?"<span class='b'><span class='ico' style='background-image: url(\"//spac.me/i/remove.png\");'></span> Убрать плеер из панели<span class='ico ico_arr ico_m'></span></span>":"<span class='b'><span class='ico ico_ok_grey'></span> Переместить плеер - переносит кнопку открытия плеера в левую панель<span class='ico ico_arr ico_m'></span></span>",style:"border-bottom: unset; font-size: small;",onclick:function(e){return l?k.delCookie("gp_left_btn"):k.setCookie("gp_left_btn","1",null),document.location.reload(),!0}}),p=k.ce("a",{href:e+"//spaces.ru/newbequest/?r=newbequest/delete",style:"border-bottom: unset; display: none; font-size: small;",id:"sp_newbequest_togl",class:"stnd-link stnd-link_arr sp_plus_liness",html:"<span class='b'><span class='ico' style='background-image: url(\"//spac.me/i/remove.png\");'></span> Скрыть квест новичка<span class='ico ico_arr ico_m'></span></span>",onclick:function(o){var i=k.getCK(0);return k.confirmm("Хотите удалить квест новичка?",function(){k.ajax(e+"//spaces.ru/newbequest/delete/?CK="+i+"&link_id=0","GET",null,function(){k.alertm("Квест новичка скрыт!",1,null)},2),setTimeout(function(){k.newbequest()},1e3)}),!1}});i.appendChild(t),i.appendChild(s),i.appendChild(r),i.appendChild(c),i.appendChild(p),o.appendChild(i)},setLocation:function(e){e=e||document.location.href.toString();var o=k.qs("#SP_PLUS_SETLOCATIONLINK"),i=document.createEvent("MouseEvent");i.initEvent("click",!0,!0),o?(o.href=e,o.dispatchEvent(i)):(o=k.ce("a",{href:e,style:"display: none;",id:"SP_PLUS_SETLOCATIONLINK"}),document.body.appendChild(o),o.dispatchEvent(i))},isValidUrl:function(e){return/^(?:(?:https?|ftp|telnet):\/\/(?:[а-я0-9_-]{1,32}(?::[а-я0-9_-]{1,32})?@)?)?(?:(?:[а-я0-9-]{1,128}\.)+(?:рф)|(?! 0)(?:(?! 0[^.]|255)[ 0-9]{1,3}\.){3}(?! 0|255)[ 0-9]{1,3})(?:\/[a-zа-я0-9.,_@%&?+=\~\/-]*)?(?:#[^ \'\"&<>]*)?$/i.test(e)||/^(?:(?:https?|ftp|telnet):\/\/(?:[a-z0-9_-]{1,32}(?::[a-z0-9_-]{1,32})?@)?)?(?:(?:[a-z0-9-]{1,128}\.)+(?:com|net|org|mil|edu|arpa|ru|gov|biz|info|aero|inc|name|[a-z]{2})|(?! 0)(?:(?! 0[^.]|255)[ 0-9]{1,3}\.){3}(?! 0|255)[ 0-9]{1,3})(?:\/[a-zа-я0-9.,_@%&?+=\~\/-]*)?(?:#[^ \'\"&<>]*)?$/i.test(e)},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},rand:function(e,o){return Math.round(Math.random()*(o-e))+e},inBefore:function(e,o){return o.parentNode.insertBefore(e,o)},insertAfter:function(e,o){var i=o.parentNode,t=o.nextSibling;if(i)return t?i.insertBefore(e,t):i.appendChild(e)},qs:function(e){return document.querySelector(e)},getClassName:function(e,o){e=e.split(".");for(var i=new Array,t=document.getElementsByTagName(e[0]),n=0;n<t.length;n++)t[n].className.indexOf(e[1])>=0&&!o?i.push(t[n]):t[n].className==e[1]&&o&&i.push(t[n]);return i[0]?i:null},declOfNum:function(e,o){return o[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]},console:{info:function(e){var o=new Date;e="("+(o.getHours()<10?"0":"")+o.getHours()+":"+(o.getMinutes()<10?"0":"")+o.getMinutes()+":"+(o.getSeconds()<10?"0":"")+o.getSeconds()+") "+e,g.debug,console.info(e),o=null},error:function(e){var o=new Date;e="("+(o.getHours()<10?"0":"")+o.getHours()+":"+(o.getMinutes()<10?"0":"")+o.getMinutes()+":"+(o.getSeconds()<10?"0":"")+o.getSeconds()+") "+e,g.debug,console.error(e),o=null},log:function(e){var o=new Date;e="("+(o.getHours()<10?"0":"")+o.getHours()+":"+(o.getMinutes()<10?"0":"")+o.getMinutes()+":"+(o.getSeconds()<10?"0":"")+o.getSeconds()+") "+e,g.debug,console.log(e),o=null},debug:function(e){var o=new Date;e="("+(o.getHours()<10?"0":"")+o.getHours()+":"+(o.getMinutes()<10?"0":"")+o.getMinutes()+":"+(o.getSeconds()<10?"0":"")+o.getSeconds()+") "+e,g.debug,console.debug(e),o=null},remove:function(){k.remove(k.qs("#SP_PLUS_CONSOLE")),k.remove(k.qs("#SP_PLUS_CONSOLE_CLEAR"))}},consoleAppend:function(e,o){try{l++;var i=k.qs("#SP_PLUS_CONSOLE"),t=k.ce("span",{style:"color: "+o+";",html:"&gt;&nbsp;"+e});if(i)i.appendChild(t),i.appendChild(k.ce("br",null));else{i=k.ce("div",{id:"SP_PLUS_CONSOLE",style:"position: fixed; bottom: 0px; width: 100%; margin: 0px; height: 100px; background: #000000; color: #808080; font-size: 12px; border-top: 2px solid #505050; overflow-x: auto; overflow-y: visible; z-index: 999998; line-height: 1.5; padding: 7px; display: none;"});var n=k.ce("div",{html:"Консоль ("+l+")",title:"Показать консоль",id:"SP_PLUS_CONSOLE_CLEAR",style:"position: fixed; font-size: 12px; opacity: 0.7; border-radius: 3px 0px 0px 0px; border: 1px solid #505050; padding: 5px; z-index: 999999; cursor: pointer; background: #808080; right: 0px; bottom: 0px;",onclick:function(e){""==i.style.display?(i.style.display="none",e.target.title="Показать консоль"):(i.style.display="",e.target.title="Скрыть консоль")}}),s=k.ce("span",{html:"x",title:"Очистить консоль",style:"color: #F5F5F5; position: fixed; right: 7px; padding: 5px; cursor: pointer; margin-right: 15px;",onclick:function(e){i.innerHTML="",l=0,n.innerHTML="Консоль (0)"}});i.appendChild(s),i.appendChild(t),i.appendChild(k.ce("br",null)),document.body.appendChild(i),document.body.appendChild(n)}i.scrollTop=999999999999,k.qs("#SP_PLUS_CONSOLE_CLEAR")&&(k.qs("#SP_PLUS_CONSOLE_CLEAR").innerHTML="Консоль ("+l+")")}catch(e){k.console.error("Ошибка (SP_CONSOLE): "+e.name+":"+e.message+"\n"+e.stack)}},time2str:function(e){var o=parseInt(e,10);if(isNaN(o))return k.console.info(o),null;var i=parseFloat(o/3600).toFixed(2).toString();return(i=i.split("."))[0]+" ч, "+parseInt(i[1]/(100/60),10)+" мин"},setSelection:function(e){var o,i;document.createRange?((i=document.createRange()).selectNode(e),(o=window.getSelection()).removeAllRanges(),o.addRange(i)):((i=document.body.createTextRange()).moveToElementText(e),i.select())},sound:function(e,o){try{var i=new Audio(e);i.volume=o/100,i.play()}catch(e){k.console.error("Ошибка (SOUND): "+e.name+":"+e.message+"\n"+e.stack)}},events:function(){try{var e={mail:k.qs("#mail_notif_cnt"),journal:k.qs("#jour_notif_cnt"),feed:k.qs("#lent_notif_cnt")},o=k.getCookie("spacesactive"),i=0;for(var t in e)e[t]&&g.events[t]&&""!=e[t].innerHTML&&!isNaN(e[t].innerHTML)&&(i+=parseInt(e[t].innerHTML,10));if(i>s){if("false"==o&&(k.sound(g.events.url+"?r="+k.rand(1e3,9999),g.events.volume),g.events.notifications)){var n=k.declOfNum(i,["новое событие","новых события","новых событий"]);k.notifications("Новые события на Spaces!",{body:"У Вас "+i+" "+n+"!",icon:u,tag:"events"},null)}s=i,k.console.info("Новые события: "+i+", вкладка активна: "+o)}else i<s&&(s=i,k.console.info("Скидываем счётчик до: "+i))}catch(e){k.console.error("Ошибка (EVENTS): "+e.name+":"+e.message+"\n"+e.stack)}},friendsOnline:function(o){var i=k.qs("#friends_cnt"),t=k.qs("#SP_PLUS_FRIENDSSB"),n=0;if(i&&!isNaN(i.innerHTML)&&(n=parseInt(i.innerHTML,10)),i)try{if(g.friendsListSH?t&&(i.parentNode.title||(i.parentNode.title="Скрыть список"),i.parentNode.hasAttribute("sp-click-el")||(i.parentNode.onclick=function(e){return"none"!=t.style.display?(t.style.display="none",e.target.parentNode.title="Показать список"):(t.style.display="",e.target.parentNode.title="Скрыть список"),!1},i.parentNode.setAttribute("sp-click-el","1"))):(i.parentNode.title="",i.parentNode.removeAttribute("sp-click-el"),i.parentNode.onclick=null,t&&"none"==t.style.display&&(t.style.display="")),o)if(n>0){if(c++,n!=a||n>0&&!t||c>=700){c>=700&&(c=0,k.console.info("[S+] Принудительно обновляем друзей!")),a=n;var s=i.parentNode.parentNode.parentNode;t=t||k.ce("div",{id:"SP_PLUS_FRIENDSSB",class:"list-link__wrap"}),k.jajax(e+"//spaces.ru/friends/?S=3",function(o){try{var n=k.extend({tabbed_panel:{tabs:[null,{content:{list:null}}]}},JSON.parse(o)).tabbed_panel.tabs[1].content.list;n?k.jajax(e+"//spaces.ru/friends/?P=2&S=3",function(o){var s=k.getClassName("span.s_i s_i_friends"),r=k.extend({tabbed_panel:{tabs:[null,{content:{list:{avatar:[null,{previewURL:null,name:null}],online_label:[null,{online_status:null,on_img:null}]}}}]}},JSON.parse(o)).tabbed_panel.tabs[1].content.list;r=r?k.extend(n,r):n,t.innerHTML="";var l=g.friendsOnMax>r.length?r.length:g.friendsOnMax;a!=r.length&&d<3?(d++,setTimeout(function(){a=r.length,k.console.info("[S+] Количество друзей не точное, пробуем еще раз ("+d+" из 3)")},1e3)):a==r.length&&(d=0);for(var c=0;c<l;c++)t.appendChild(k.ce("a",{href:e+"//spaces.ru/mysite/?name="+r[c].name,class:"li",html:'<span class="comm_ava m for_avatar '+s+'"><img src="'+r[c].avatar.previewURL+'" alt="" class="preview s21_20"></span><span class="online-status m"><img class="p14 online_status_ico" src="'+e+"//spac.me/i/"+r[c].online_status.on_img+'" alt="(ON)"></span><span class="block-item__title m break-word">'+r[c].name+"</span>"}));i.parentNode.removeAttribute("sp-click-el"),k.console.info("[S+] Обновили список друзей!")}):k.remove(t)}catch(e){k.console.error("Ошибка (FRIENDS_ONLINE_JSON): "+e.name+":"+e.message+"\n"+e.stack)}}),s.appendChild(t)}}else 0==n&&t&&k.remove(t);else t&&(k.remove(t),a=0,k.console.info("[S+] Убрали панель друзей!")),i.parentNode.onclick=null,i.parentNode.removeAttribute("sp-click-el"),c=0}catch(e){k.console.error("Ошибка (FRIENDS_ONLINE): "+e.name+":"+e.message+"\n"+e.stack)}},online:function(){document.location.href.replace(/\#.*$/i,"");var i=document.location.pathname.toString();if("/anketa/"==i)try{var t=k.getQuery("user")||k.service(0),n=k.getClassName("div.info-item__title",1);n||(n=k.getClassName("span.light_item",1)),t&&n&&o!=t&&(o=t,k.jajax(e+"//spaces.ru/anketa/?user="+t,function(e){if(e)try{var o=k.extend({user_widget:{online_time:null}},JSON.parse(e));if(o.user_widget.online_time){var i=k.time2str(o.user_widget.online_time);for(var t in n)if("Время онлайн:"==n[t].innerHTML){var s=n[t].nextElementSibling||n[t].nextSibling;3==s.nodeType?s.data=" "+i:s.innerHTML=i,k.console.info("[S+] Время онлайн: "+i)}}}catch(e){k.console.error("Ошибка (JSON_ONLINE): "+e.name+":"+e.message+"\n"+e.stack)}}))}catch(e){k.console.error("Ошибка (ONLINE): "+e.name+":"+e.message+"\n"+e.stack)}else"/anketa/"!=i&&(o=null)},favorite:function(){var o=document.location.href,n=document.location.pathname.toString();o!=e+"//spaces.ru/bookmarks/add/?irb526786=1"||t||(t=o,k.setLocation(e+"//spaces.ru/bookmarks/?irb526786=1"));var s=null;if("/anketa/"==n){var a=document.links;(s=k.find(a,{href:e+"//spaces.ru/bookmarks/add/?"}))||(s=k.find(a,{href:e+"//spaces.ru/bookmarks/edit/?"}))}if("/mysite/"!=n&&"/anketa/"!=n&&"/activity/"!=n||s||i==o)"/mysite/"!=n&&"/anketa/"!=n&&"/activity/"!=n&&(i=null);else{var r=k.qs("#SP_PLUS_INFAVORITE");i=o;try{var l=k.getQuery("user");l||(l=k.getQuery("name")||k.service(0));var c=k.getClassName("td.table__cell table__cell_last",1);l&&c&&c[0].innerHTML.indexOf("Вперёд")<0&&!r&&k.jajax(e+"//spaces.ru/anketa/?user="+l,function(o){if(o)try{var i,t=k.extend({user_widget:{id:null}},JSON.parse(o));if(t.user_widget.id){i="A"==c[0].firstElementChild.nodeName?c[0].firstElementChild.className.split(" ")[0]:"stnd-link";var n=r||k.ce("td",{class:"table__cell",id:"SP_PLUS_INFAVORITE"});n.innerHTML='<a href="'+e+"//spaces.ru/bookmarks/add/?object_id="+t.user_widget.id+'&object_type=11" class="'+i+'" title="Добавить в закладки"><span class="ico ico_fav_grey js-ico"></span> B закладки</a>',k.isFav(t.user_widget.id,n,l,'<span class="ico ico_fav_on js-ico"></span><span style="color: #108210;"> В закладках</span>'),r||k.inBefore(n,c[0]);var s=c[0].parentNode.childNodes;for(var a in s)"TD"==s[a].nodeName&&(s[a].width="25%")}}catch(e){k.console.error("Ошибка (JSON_FAVORITE): "+e.name+":"+e.message+"\n"+e.stack)}})}catch(e){k.console.error("Ошибка (FAVORITE): "+e.name+":"+e.message+"\n"+e.stack)}}},isFav:function(o,i,t,n){k.jajax(e+"//spaces.ru/bookmarks/add/?object_id="+o+"&object_type=11",function(e){if(e)try{var o=k.extend({delete_link:{delete_URL:null}},JSON.parse(e));if(o.delete_link.delete_URL){var s=o.delete_link.delete_URL.replace(/&amp;/g,"&");i.firstElementChild.href=s,i.firstElementChild.title="Удалить из закладок",i.firstElementChild.innerHTML=n,i.firstElementChild.onclick=function(){return k.confirmm("Хотите удалить пользователя "+t+" из закладок?",function(){k.setLocation(s)}),!1}}}catch(e){k.console.error("Ошибка (JSON_ISFAVORITE): "+e.name+":"+e.message+"\n"+e.stack)}})},bannedHTML:function(o,i,t,n){return i?'<div class="widgets-group links-group">'+(n?'<span id="SP_PLUS_INFAV"><a href="'+e+"//spaces.ru/bookmarks/add/?object_id="+n+'&object_type=11" id="SP_PLUS_INFAV" class="list-link list-link_arrow list-link_first"><span class="ico ico_fav_grey js-ico"></span> Добавить в закладки<span class="ico ico_arr"></span></a></span>':"")+'<a href="'+e+"//spaces.ru/gifts/user_list/?user="+o+'" class="list-link list-link_arrow list-link_first"><span class="ico ico_gifts_blue"></span> Подарки<span class="ico ico_arr"></span></a>'+(t?"":'<a href="'+e+"//spaces.ru/guestbook/?name="+o+'" class="list-link list-link_arrow list-link_first"><span class="ico ico_gb"></span> Гостевая<span class="ico ico_arr"></span></a><a href="'+e+"//spaces.ru/diary/?name="+o+'" class="list-link list-link_arrow"><span class="ico ico_blog"></span> Личный блог<span class="ico ico_arr"></span></a>')+'<a href="'+e+"//spaces.ru/forums/search_user/?Comm=0&Ext=1&word="+o+'" class="list-link list-link_arrow"><span class="ico ico_forum"></span> Темы и комментарии <span class="ico ico_arr"></span></a>'+(t?"":'<div class="sep-item"></div><a href="'+e+"//spaces.ru/pictures/?P=1&amp;name="+o+'" class="list-link list-link_arrow"><span class="ico ico_photo"></span> Фотографии<span class="ico ico_arr"></span></a><a href="'+e+"//spaces.ru/music/?P=1&amp;name="+o+'" class="list-link list-link_arrow"><span class="ico ico_music"></span> Музыка<span class="ico ico_arr"></span></a><a href="'+e+"//spaces.ru/video/?P=1&amp;name="+o+'" class="list-link list-link_arrow"><span class="ico ico_video"></span> Видео<span class="ico ico_arr"></span></a><a href="'+e+"//spaces.ru/files/?P=1&amp;name="+o+'" class="list-link list-link_arrow"><span class="ico ico_file"></span> Файлы<span class="ico ico_arr"></span></a>')+'<div class="sep-item"></div><a href="'+e+"//spaces.ru/comm/?List=1&user="+o+'" class="list-link list-link_arrow"><span class="ico ico_comm"></span> Сообщества<span class="ico ico_arr"></span></a><a href="'+e+"//spaces.ru/friends/?name="+o+'&amp;p=1" class="list-link list-link_arrow"><span class="ico ico_friends"></span> Друзья<span class="ico ico_arr"></span></a><a href="'+e+"//spaces.ru/lenta/readers/?user="+o+'" class="list-link list-link_arrow"><span class="ico ico_readers"></span> Читатели<span class="ico ico_arr"></span></a></div>':'<div class="no_underline_block start_page_padd light_border_bottom lh_160" style="padding-top:1px;">'+(n?'<div id="SP_PLUS_INFAV"><a href="'+e+"//spaces.ru/bookmarks/add/?object_id="+n+'&object_type=11"><img src="'+e+'//spac.me/i/action_fav_gray.gif" alt="" class="m p16"> <span class="m"> Добавить в закладки</span></a></div>':"")+'<div><a href="'+e+"//spaces.ru/gifts/user_list/?user="+o+'"><img src="'+e+'//spac.me/i/sendgift.gif" alt="" class="m p16"> <span class="m">Подарки</span></a></div>'+(t?"":'<div> <a href="'+e+"//spaces.ru/guestbook/?name="+o+'&amp;p=0"><img src="'+e+'//spac.me/i/guestbook.gif" alt="" class="m p16"> <span class="m">Гостевая</span></a></div><div> <a href="'+e+"//spaces.ru/diary/?name="+o+'"><img src="'+e+'//spac.me/i/diary.gif" alt="" class="m p16"> <span class="m">Блог</span></a></div>')+'</div><div class="no_underline_block start_page_padd light_blue light_border_bottom lh_160">'+(t?"":'<div> <a href="'+e+"//spaces.ru/pictures/?P=1&amp;name="+o+'"><img src="'+e+'//spac.me/i/PhotoIcon.gif" alt="" class="m p16"> <span class="m">Фото</span></a></div><div> <a href="'+e+"//spaces.ru/music/?P=1&amp;name="+o+'"><img src="'+e+'//spac.me/i/file_mp3.gif" alt="" class="m p16"> <span class="m">Музыка</span></a></div><div> <a href="'+e+"//spaces.ru/video/?P=1&amp;name="+o+'"><img src="'+e+'//spac.me/i/icon_video.gif" alt="" class="m p16"> <span class="m">Видео</span></a></div><div> <a href="'+e+"//spaces.ru/files/?P=1&amp;name="+o+'"><img src="'+e+'//spac.me/i/film.gif" alt="" class="m p16"> <span class="m">Файлы</span></a></div>')+'<div> <a href="'+e+"//spaces.ru/forums/search_user/?Comm=0&Ext=1&word="+o+'"><img src="'+e+'//spac.me/i/Forum.gif" alt="" class="m p16"> <span class="m">Темы и комментарии</span></a> </div></div><div class="no_underline_block start_page_padd light_border_bottom lh_160"><div> <a href="'+e+"//spaces.ru/friends/?name="+o+'"><img src="'+e+'//spac.me/i/friends.gif" alt="" class="m p16"> <span class="m">Друзья</span></a></div><div> <a href="'+e+"//spaces.ru/comm/?List=1&user="+o+'"> <img src="'+e+'//spac.me/i/soo.gif" alt="" class="m p16"> <span class="m">Сообщества</span></a></div><div> <a href="'+e+"//spaces.ru/lenta/readers/?user="+o+'"><img src="'+e+'//spac.me/i/icon_readers.gif" alt="" class="m p16"> <span class="m">Читатели</span></a></div></div>'},gifts:function(){document.location.href.replace(/\#.*$/i,"");var o=document.location.pathname.toString(),i=k.qs("#SP_PLUS_GIFT");if("/mysite/"==o&&!i)try{var t=k.getQuery("name")||k.service(0),n=document.getElementsByTagName("img"),s=k.find(n,{src:"/i/gifts/40/"});if(s||(s=k.find(n,{src:"/i/gifts/25/"})),s&&t){var a=!0;for(var r in s){var l=0,c=k.ce("i",{style:"color: #FFFFFF; background-color: #000000; border-radius: 3px; padding: 5px; position: absolute; display: none; top: -40px; z-index:9999999; opacity: 0.8",id:"SP_PLUS_GIFT"});c.innerHTML="",k.insertAfter(c,s[r].parentNode),s[r].parentNode.parentNode.style.position="relative",s[r].parentNode.parentNode.style.display="inline",s[r].ontouchstart=function(o){if(a){var i=o.target.parentNode;/#gift([0-9]+)$/i.test(i.href)?l=/#gift([0-9]+)$/i.exec(i.href)[1]:/(\?|&)gift=([0-9]+)/i.test(i.href)&&(l=/(\?|&)gift=([0-9]+)/i.exec(i.href)[2]);var n=i.nextElementSibling;n.style.display="",""==n.innerHTML&&(n.innerHTML="<img src='"+e+"//spac.me/i/spinner2.gif' alt='' style='height: 16px !important;'>",k.jajax(e+"//spaces.ru/gifts/details/?gift="+l+"&user="+t,function(o){try{if(o){var i=k.extend({gift_widget:{from_user:{widget:{siteLink:{user_name:null}}},date:null,message:null}},JSON.parse(o));if(i.gift_widget.from_user){var t=i.gift_widget.from_user.widget.siteLink.user_name;n.innerHTML='<div><a href="'+e+"//spaces.ru/mysite/?name="+("Система"==t?"4839":t)+'" style="color: #FFFFFF !important">'+t+"</a><small>&nbsp;("+i.gift_widget.date+')</small></div><div class="sp_plus_small"><small>'+i.gift_widget.message+"</small></div>"}else n.innerHTML="Неизвестный"}}catch(e){n.innerHTML="Неизвестный",k.console.error("Ошибка (JSON_GIFTS): "+e.name+":"+e.message+"\n"+e.stack)}}))}else o.target.parentNode.nextElementSibling.style.display="none"},s[r].ontouchend=function(e){a=!a},s[r].onmouseenter=function(o){var i=o.target.parentNode;/#gift([0-9]+)$/i.test(i.href)?l=/#gift([0-9]+)$/i.exec(i.href)[1]:/(\?|&)gift=([0-9]+)/i.test(i.href)&&(l=/(\?|&)gift=([0-9]+)/i.exec(i.href)[2]);var n=i.nextElementSibling;n.onmouseenter=function(){n.style.display=""},n.onmouseleave=function(){n.style.display="none"},n.style.display="",""==n.innerHTML&&(n.innerHTML="<img src='"+e+"//spac.me/i/spinner2.gif' alt='' style='height: 16px !important;'>",k.jajax(e+"//spaces.ru/gifts/details/?gift="+l+"&user="+t,function(o){try{if(o){var i=k.extend({gift_widget:{from_user:{widget:{siteLink:{user_name:null}}},date:null,message:null}},JSON.parse(o));if(i.gift_widget.from_user){var t=i.gift_widget.from_user.widget.siteLink.user_name;n.innerHTML='<div><a href="'+e+"//spaces.ru/mysite/?name="+("Система"==t?"4839":t)+'" style="color: #FFFFFF !important">'+t+"</a><small>&nbsp;("+i.gift_widget.date+')</small></div><div class="sp_plus_small"><small>'+i.gift_widget.message+"</small></div>"}else n.innerHTML="Неизвестный"}}catch(e){n.innerHTML="Неизвестный",k.console.error("Ошибка (JSON_GIFTS): "+e.name+":"+e.message+"\n"+e.stack)}}))},s[r].onmouseleave=function(e){e.target.parentNode.nextElementSibling.style.display="none"}}}}catch(e){k.console.error("Ошибка (GIFTSTOOLS): "+e.name+":"+e.message+"\n"+e.stack)}},bannedTools:function(){var o=document.location.href.replace(/\#.*$/i,""),i=document.location.pathname.toString(),t=!0,s=k.qs("#SP_PLUS_BNDBLOCK");if("/mysite/"==i&&n!=o)try{var a=k.getQuery("user");a||(a=k.getQuery("name")||k.service(0)),n=o,s&&k.remove(s),a&&k.jajax(e+"//spaces.ru/mysite/?name="+a,function(o){try{if(o){var i=k.qs("#siteContent");i||(i=k.getClassName("div.main",null))&&(i=i[0],t=!1);var n=k.extend({owner_id:null,owner_widget:{ban_info:{deleted:null,frozen:null,blocked:null}}},JSON.parse(o));if(n.owner_widget.ban_info&&n.owner_id&&i){var r=!1,l=n.owner_id;n.owner_widget.ban_info.deleted?k.console.info("[S+] Аккаунт удален!"):n.owner_widget.ban_info.frozen?k.console.info("[S+] Аккаунт покинут!"):n.owner_widget.ban_info.blocked&&(k.console.info("[S+] Аккаунт забанен!"),r=!0);var c=s||k.ce("div",{id:"SP_PLUS_BNDBLOCK"});c.innerHTML=k.bannedHTML(a,t,r,l),s||i.appendChild(c),l&&k.isFav(l,k.qs("#SP_PLUS_INFAV"),a,t?'<span class="ico ico_fav_on js-ico"></span> Удалить из закладок<span class="ico ico_arr"></span>':'<img src="'+e+'//spac.me/i/action_fav_color.gif" alt="" class="m p16"> <span class="m"> Удалить из закладок</span>')}}}catch(e){k.console.error("Ошибка (JSON_BLOCKED): "+e.name+":"+e.message+"\n"+e.stack)}})}catch(e){k.console.error("Ошибка (BLOCKED): "+e.name+":"+e.message+"\n"+e.stack)}else"/mysite/"!=i&&(s&&k.remove(s),n=null)},extend:function(e,o){if(o)for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);return e},service:function(e){try{var o=document.getElementsByTagName("script").item(0);if(e){if(/REVISION\s?=\s?'(.*?)'/i.test(o.innerHTML)){var i=k.trim(/REVISION\s?=\s?'(.*?)'/i.exec(o.innerHTML)[1]);return""==i?null:i}return null}if(/name:'(.*?)'/i.test(o.innerHTML)){var t=k.trim(/name:'(.*?)'/i.exec(o.innerHTML)[1]);return""==t?null:t}return null}catch(e){return null}},getCK:function(e){var o=k.getCookie("sid");return e?o:o.substr(-4)},allCookie:function(){var e=new Object,o=document.cookie;if(o&&""!=k.trim(o))for(var i=o.split(";"),t=0;t<i.length;t++){var n=k.trim(i[t]);if(""!=n){var s=n.split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}}return e},getCookie:function(e){var o=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return o?decodeURIComponent(o[1]):void 0},delCookie:function(e){k.setCookie(e,null,{expires:-1})},setCookie:function(e,o,i){!(i=k.extend({path:"/",expires:365,secure:!1,domain:".spaces.ru"},i)).expires||i.expires instanceof Date||(i.expires=new Date(+new Date+864e5*i.expires));var t=encodeURIComponent(e)+"="+encodeURIComponent(o);i.expires&&(t+="; expires="+i.expires.toUTCString()),i.domain&&(t+="; domain="+i.domain),i.path&&(t+="; path="+i.path),i.secure&&(t+="; secure"),document.cookie=t},find:function(e,o){for(var i=new Array,t=0;t<e.length;t++)for(var n in o)e[t][n].indexOf(o[n])>=0&&i.push(e[t]);return i[0]?i:null},readersDelete:function(){if("/lenta/readers/"==document.location.pathname.toString()&&!k.qs("#SP_PLUS_BOTTOM_DIVB"))try{var o=k.find(document.links,{href:e+"//spaces.ru/lenta/reader_delete/?"});if(o&&!k.qs("#SP_PLUS_BOTTOM_DIVB")){var i=k.getCK(0),t=new Array;for(var n in o){o[n].style.textAlign="center";var s=k.ce("div",{class:"stnd-link icon-link",style:"right: 50px;top: -42px; padding-left: 8px; padding-right: 8px;"}),a=k.ce("input",{type:"checkbox",id:"SP_DR_"+/(\?|&)user=([A-Za-z0-9\_]+)/i.exec(o[n].href)[2],class:"sp_plus_checkbox"}),r=k.ce("label",{style:"margin-left: 0px;",attr:{for:"SP_DR_"+/(\?|&)user=([A-Za-z0-9\_]+)/i.exec(o[n].href)[2]}});s.appendChild(a),s.appendChild(r),k.insertAfter(s,o[n]),t.push(a)}var l=o[o.length-1].parentNode;if(l&&(l=l.parentNode),l){var c=k.ce("div",{class:"user__tools_last",id:"SP_PLUS_BOTTOM_DIVB"}),p=k.ce("button",{class:"user__tools-link table__cell",style:"width: 50%; display: inline-block; box-sizing: border-box;",html:'<span class="sp_plus_ico_okb"></span><span style="color: #57A3EA;">Выбрать все</span>',onclick:function(e){for(var o="SPAN"==e.target.nodeName?e.target.parentNode:e.target,i=0;i<t.length;i++)o.innerHTML.indexOf("Выбрать все")>=0?t[i].checked=!0:t[i].checked=!1;return o.innerHTML='<span class="sp_plus_ico_okb"></span><span style="color: #57A3EA;">'+(o.innerHTML.indexOf("Выбрать все")>=0?"Снять отметки":"Выбрать все")+"</span>",!1}}),d=k.ce("button",{class:"user__tools-link table__cell",style:"width: 50%; display: inline-block; border-right: 1px solid #cdd4e1; box-sizing: border-box;",html:'<span class="sp_plus_ico_del"></span><span style="color: #F86934;">Удалить выбранных</span>',onclick:function(){var o=0,n=new Array;p.innerHTML='<span class="sp_plus_ico_okb"></span><span style="color: #57A3EA;">Выбрать все</span>';for(var s=0;s<t.length;s++)if(1==t[s].checked){var a=/^SP_DR_([A-Za-z0-9\_]+)$/i.exec(t[s].id)[1];n.push(a),t[s].checked=!1,o++}if(o>0){var r=k.declOfNum(o,["я","я","ей"]);k.confirmm("Хотите удалить "+o+" читател"+r+"?",function(){var t=setInterval(function(){k.alertm("Удаляем читателей: <span style='color: #008000;'>"+o+"</span><br/><a href='#' onclick='return false;' id='SP_PLUS_CANCEL' class='sp_plus_a'>Отмена</a>",0,null);var s=n[--o];k.ajax(e+"//spaces.ru/lenta/reader_delete/?user="+s,"POST","&CK="+i+"&cfms=Удалить",function(e){k.console.info("[S+] Удалили читателей: "+s)},2),k.qs("#SP_PLUS_CANCEL").onclick=function(){n=null,clearInterval(t),k.alertm("Отменено!<br/><a href='"+document.location.href.replace(/\#.*$/i,"")+"' onclick='document.body.removeChild(this.parentNode); return true;' class='sp_plus_a'>Обновить страницу</a>",1,null)},o<1&&(n=null,clearInterval(t),k.alertm("Готово!<br/><a href='"+document.location.href.replace(/\#.*$/i,"")+"' onclick='document.body.removeChild(this.parentNode); return true;' class='sp_plus_a'>Обновить страницу</a>",1,null))},500)})}else k.alertm("Не выбрано ни одного читателя!",1,null);return!1}});c.appendChild(d),c.appendChild(p),k.insertAfter(c,l)}else{for(n=0;n<t.length;n++)t[n].style.display="none";c=k.ce("div",{style:"display: none;",id:"SP_PLUS_BOTTOM_DIVB"}),document.body.appendChild(c)}}}catch(e){k.console.error("Ошибка (READERS): "+e.name+":"+e.message+"\n"+e.stack)}},blogsDelete:function(){var o=document.location.pathname.toString();if(("/diary/"==o||"/diary/view/"==o)&&!k.qs("#SP_PLUS_BOTTOM_DIVB"))try{var i=k.find(document.links,{href:e+"//spaces.ru/diary/editaccess/?id="});if(i&&!k.qs("#SP_PLUS_BOTTOM_DIVB")){for(var t=k.getCK(0),n=new Array,s=0;s<i.length;s++)if(i[s].className){i[s].style.textDecoration="none";var a=k.ce("input",{type:"checkbox",id:"SP_DB_"+/\?id=([0-9]+)/i.exec(i[s].href)[1],class:"sp_plus_checkbox"}),r=k.ce("label",{attr:{for:"SP_DB_"+/\?id=([0-9]+)/i.exec(i[s].href)[1]}});k.insertAfter(a,i[s]),k.insertAfter(r,a),n.push(a)}var l=n[n.length-1].parentNode;if(l&&(l=l.parentNode),l&&(l=l.parentNode),l&&(l=l.parentNode),l){var c=k.ce("div",{class:"widgets-group user__tools_last",id:"SP_PLUS_BOTTOM_DIVB"}),p=k.ce("button",{class:"user__tools-link table__cell",style:"width: 50%; display: inline-block; box-sizing: border-box;",html:'<span class="sp_plus_ico_okb"></span><span style="color: #57A3EA;">Выбрать все</span>',onclick:function(e){for(var o="SPAN"==e.target.nodeName?e.target.parentNode:e.target,i=0;i<n.length;i++)o.innerHTML.indexOf("Выбрать все")>=0?n[i].checked=!0:n[i].checked=!1;return o.innerHTML='<span class="sp_plus_ico_okb"></span><span style="color: #57A3EA;">'+(o.innerHTML.indexOf("Выбрать все")>=0?"Снять отметки":"Выбрать все")+"</span>",!1}}),d=k.ce("button",{class:"user__tools-link table__cell",style:"width: 50%; display: inline-block; border-right: 1px solid #cdd4e1; box-sizing: border-box;",html:'<span class="sp_plus_ico_del"></span><span style="color: #F86934;">Удалить выбранные</span>',onclick:function(){var o=0,i=new Array;p.innerHTML='<span class="sp_plus_ico_okb"></span><span style="color: #57A3EA;">Выбрать все</span>';for(var s=0;s<n.length;s++)if(1==n[s].checked){var a=/^SP_DB_([0-9]+)$/i.exec(n[s].id)[1];i.push(a),n[s].checked=!1,o++}if(o>0){var r=k.declOfNum(o,["","а","ов"]);k.confirmm("Хотите удалить "+o+" блог"+r+"?",function(){var n=setInterval(function(){k.alertm("Удаляем блоги: <span style='color: #008000;'>"+o+"</span><br/><a href='#' onclick='return false;' id='SP_PLUS_CANCEL' class='sp_plus_a'>Отмена</a>",0,null);var s=i[--o];k.ajax(e+"//spaces.ru/diary/delete/?r=diary/delete","POST","CK="+t+"&id="+s+"&Sure=1",function(e){k.console.info("[S+] Блог удален: "+s)},2),k.qs("#SP_PLUS_CANCEL").onclick=function(){i=null,clearInterval(n),k.alertm("Отменено!<br/><a href='"+document.location.href.replace(/\#.*$/i,"")+"' onclick='document.body.removeChild(this.parentNode); return true;' class='sp_plus_a'>Обновить страницу</a>",1,null)},o<1&&(i=null,clearInterval(n),k.alertm("Готово!<br/><a href='"+document.location.href.replace(/\#.*$/i,"")+"' onclick='document.body.removeChild(this.parentNode); return true;' class='sp_plus_a'>Обновить страницу</a>",1,null))},500)})}else k.alertm("Не выбрано ни одного блога!",1,null);return!1}});c.appendChild(d),c.appendChild(p),k.insertAfter(c,l)}else{for(s=0;s<n.length;s++)n[s].style.display="none";c=k.ce("div",{style:"display: none;",id:"SP_PLUS_BOTTOM_DIVB"}),document.body.appendChild(c)}}}catch(e){k.console.error("Ошибка (BLOGS): "+e.name+":"+e.message+"\n"+e.stack)}},prompt:function(e,o){e=e||"",o=o||"";var i=prompt(e,o);return null==i?"":i},icon:function(e){return e?'<span class="sp_plus_ico_info"></span> ':'<span class="sp_plus_ico_alert"></span> '},confirmm:function(e,o){var i=k.ce("a",{html:"Да",href:"#",class:"sp_plus_a",style:"color: #800000"});i.onclick=function(e){return o(),document.body.removeChild(e.target.parentNode),!1};var t=k.qs("#SP_PLUS_CONFIRM");t?t.innerHTML=e+'<br/><br/><a class="sp_plus_a" href="#" style="color: #008000;" onclick="document.body.removeChild(this.parentNode); return false;">Нет</a>&nbsp;&nbsp;':(t=k.ce("div",{class:"sp_plus_alert_y",id:"SP_PLUS_CONFIRM",html:e+'<br/><br/><a class="sp_plus_a" href="#" style="color: #008000;" onclick="document.body.removeChild(this.parentNode); return false;">Нет</a>&nbsp;&nbsp;'}),document.body.appendChild(t)),t.appendChild(i)},alert:function(e,o,i){var t=k.qs("#import_alert_div"),n=o?"oh nl sp_plus_alertg":"oh nl sp_plus_alertr";t.className=n,t.innerHTML=i?"<span class=\"ico ico_remove pointer right\" onclick=\"this.parentNode.className='';this.parentNode.innerHTML='';\"></span>"+e:e},alertm:function(o,i,t){var n=k.qs("#SP_PLUS_ALERT");n?n.innerHTML=(i?'<img src="'+e+'//spac.me/i/cross_r.gif" alt="" class="pointer right notif_close" onclick="document.body.removeChild(this.parentNode);" title="Закрыть" />':"")+o:(n=k.ce("div",{class:"sp_plus_alert_y",id:"SP_PLUS_ALERT",html:(i?'<img src="'+e+'//spac.me/i/cross_r.gif" alt="" class="pointer right notif_close" onclick="document.body.removeChild(this.parentNode);" title="Закрыть" />':"")+o}),document.body.appendChild(n)),t||setTimeout(function(){k.qs("#SP_PLUS_ALERT")&&k.qs("#SP_PLUS_ALERT").parentNode.removeChild(n)},4e3)},alertmenu:function(o,i){var t=k.qs("#SP_PLUS_ALERT");t?t.innerHTML=(i?'<img src="'+e+'//spac.me/i/cross_r.gif" alt="" class="pointer right notif_close" onclick="document.body.removeChild(this.parentNode);" title="Закрыть" />':"")+o:(t=k.ce("div",{class:"sp_plus_alert_y",style:"overflow: scroll;",id:"SP_PLUS_ALERT",html:(i?'<img src="'+e+'//spac.me/i/cross_r.gif" alt="" class="pointer right notif_close" onclick="document.body.removeChild(this.parentNode);" title="Закрыть" />':"")+o}),document.body.appendChild(t))},comments:function(){var e=k.getClassName("span.comment_date",null),o=k.qs("#SP_PLUS_BOTTOM_DIV");try{if(e){if(!o||e.length!=r){r=e.length;var i=null,t=k.qs("div.js-comments-pgn"),n=k.find(document.getElementsByTagName("input"),{name:"del_comment_"});if(n){for(var s=k.find(n[0].parentNode.getElementsByTagName("a"),{innerHTML:"Удалить"}),a=0;a<n.length;a++)if(!n[a].id||!/^DC_\d+$/i.test(n[a].id)){var l=k.ce("label",{attr:{for:"DC_"+n[a].value}});n[a].id="DC_"+n[a].value,n[a].className="sp_plus_checkbox",k.insertAfter(l,n[a])}}else for(var c=0;c<e.length;c++){if((i=k.find(e[c].parentNode.parentNode.getElementsByTagName("a"),{innerHTML:"Удалить"}))&&0==e[c].getElementsByTagName("input").length){var p=k.ce("input",{type:"checkbox",class:"sp_plus_checkbox",id:"DC_"+e[c].parentNode.parentNode.parentNode.id});l=k.ce("label",{attr:{for:"DC_"+e[c].parentNode.parentNode.parentNode.id}}),e[c].appendChild(p),e[c].appendChild(l)}c!=e.length-1||t||(t=e[c].parentNode.parentNode)}if((n&&s||i)&&!o){var d=document.getElementsByTagName("input"),_=k.ce("div",{class:"widgets-group user__tools_last",id:"SP_PLUS_BOTTOM_DIV"}),u=k.ce("button",{class:"user__tools-link table__cell",style:"width: 50%; display: inline-block; box-sizing: border-box;",html:'<span class="sp_plus_ico_okb"></span><span style="color: #57A3EA;">Выбрать все</span>',onclick:function(e){for(var o="SPAN"==e.target.nodeName?e.target.parentNode:e.target,i=0;i<d.length;i++)"checkbox"==d[i].type&&/DC_([0-9]+)/gi.test(d[i].id)&&"none"!=d[i].parentNode.parentNode.parentNode.style.display&&(o.innerHTML.indexOf("Выбрать все")>=0?d[i].checked=!0:d[i].checked=!1);return o.innerHTML='<span class="sp_plus_ico_okb"></span><span style="color: #57A3EA;">'+(o.innerHTML.indexOf("Выбрать все")>=0?"Снять отметки":"Выбрать все")+"</span>",!1}}),b=k.ce("button",{class:"user__tools-link table__cell",style:"width: 50%; display: inline-block; border-right: 1px solid rgb(205, 212, 225); box-sizing: border-box;",html:'<span class="sp_plus_ico_del"></span><span style="color: #F86934;">Удалить выбранные</span>',onclick:function(){for(var e=0,o=new Array,i=new Array,t=0;t<d.length;t++)if("checkbox"==d[t].type&&/DC_([0-9]+)/gi.test(d[t].id)&&1==d[t].checked){if(n)var s=k.find(d[t].parentNode.parentNode.parentNode.getElementsByTagName("a"),{innerHTML:"Удалить"});else s=k.find(d[t].parentNode.parentNode.parentNode.getElementsByTagName("a"),{innerHTML:"Удалить"});o.push(s[0]),i.push(d[t]),e++}if(e>0){var a=k.declOfNum(e,["й","я","ев"]);k.confirmm("Хотите удалить "+e+" комментари"+a+"?"+(g.comments_m2?" (альтернативный способ)":""),function(){var t=setInterval(function(){if(k.alertm("Удаляем комментарии: <span style='color: #008000;'>"+e+"</span><br/><a href='#' onclick='return false;' id='SP_PLUS_CANCEL' class='sp_plus_a'>Отмена</a>",0,null),e--,g.comments_m2&&o[e].href)k.ajax(o[e].href,"GET",null,null,2);else{var n=document.createEvent("MouseEvent");n.initEvent("click",!0,!0),o[e].dispatchEvent(n)}i[e].checked=!1,i[e].className+=" sp_plus_ch_cd",k.qs("#SP_PLUS_CANCEL").onclick=function(){o=null,i=null,clearInterval(t),g.comments_m2?k.setLocation(document.location.href.replace(/\#.*$/i,"")):k.alertm("Отменено!<br/><a href='"+document.location.href.replace(/\#.*$/i,"")+"' onclick='document.body.removeChild(this.parentNode); return true;' class='sp_plus_a'>Обновить страницу</a>",1,null)},e<1&&(o=null,i=null,clearInterval(t),g.comments_m2?k.setLocation(document.location.href.replace(/\#.*$/i,"")):k.alertm("Готово!<br/><a href='"+document.location.href.replace(/\#.*$/i,"")+"' onclick='document.body.removeChild(this.parentNode); return true;' class='sp_plus_a'>Обновить страницу</a>",1,null))},500)})}else k.alertm("Не выбрано ни одного комментария!",1,null);return!1}});_.appendChild(b),_.appendChild(u),t?k.insertAfter(_,t):k.qs("#page-down")?k.inBefore(_,k.qs("#page-down")):k.console.error("[S+] Не смогли найти ориентир для вставки!")}}}else r=0}catch(e){k.console.error("Ошибка (COMMENTS): "+e.name+":"+e.message+"\n"+e.stack)}},playerDown:function(){var e=k.qs("#SP_MUSIC_DOWN");try{var o=0,i=sessionStorage.getItem("music:track"),t=sessionStorage.getItem("music:playlist"),n=k.qs("#gp_main_player");if(n&&i&&t){var s=JSON.parse(i);o=parseInt(s.id,10);var a=JSON.parse(t).playlist.playlist[o].src,r=k.find(n.getElementsByTagName("td"),{className:"ico_td"});if(r&&!e){p=o;var l=k.ce("td",{id:"SP_MUSIC_DOWN",class:"ico_td",innerHTML:'<a href="'+a+'" target="_blank" class="tdn"></span><span class="ico ico_download2" title="Скачать"></span></a>'});k.insertAfter(l,r[0])}else e&&p!=o&&(p=o,k.console.info("[S+] Обновили трек!"),e.innerHTML='<a href="'+a+'" target="_blank" class="tdn"></span><span class="ico ico_download2" title="Скачать"></span></a>')}}catch(o){e&&k.remove(e),k.console.error("Ошибка (PLAYER_DOWN): "+o.name+":"+o.message+"\n"+o.stack)}},coins:function(){var o=k.find(document.links,{href:e+"//spaces.ru/services/gift_get/?id="});o&&(o=o[0],k.ajax(o.href,"GET",null,function(){try{o&&(k.remove(o.parentNode),k.console.info("[S+] Собрали монеты"))}catch(e){k.console.info("[S+] Собрали монеты???")}},2))},karmaAccept:function(){var o=k.find(document.links,{href:e+"//spaces.ru/mysite/rate_n_karma/karma/?Accept="});o&&(o=o[0],k.ajax(o.href,"GET",null,function(){try{o&&(k.remove(o.parentNode),k.console.info("[S+] Собрали карму!"))}catch(e){k.console.info("[S+] Собрали карму???")}},2))},adsRemove:function(){var o=k.find(document.links,{href:e+"//spaces.ru/?iF5oox6g="});o&&k.remove(o[0].parentNode.parentNode)},redirectURL:function(){var o=k.getClassName("a.c-red"),i=k.find(document.links,{href:e+"//spaces.ru/redirect/?"});i&&o&&(i=i[0],k.remove(i),window.open(i,"_blank")||alert("Разрешите всплывающие окна для Spaces.ru"),k.setLocation(o))},blogTools:function(){if("/diary/read/"==document.location.pathname.toString()&&!k.qs("#SP_PLUS_DELETEBL"))try{var o=k.find(document.links,{href:e+"//spaces.ru/diary/new/?"});if(o||(o=k.find(document.links,{href:e+"//spaces.ru/diary/share/index/?"}))&&!/(\?|&)Topic_id=([0-9]+)/i.test(o[0].href)&&(o=null),o)for(var i=0;i<o.length;i++)if(o[i].className){o=o[i];break}var t=k.getQuery("id")||k.getQuery("Topic_id");if(o&&t){var n=k.getQuery("address"),s=e+"//spaces.ru/diary/view/?";n&&k.jajax(document.location.href,function(e){try{if(e){var o=k.extend({topicWidget:{topicModels:{topic_id:null}}},JSON.parse(e));o.topicWidget.topicModel.owner_id&&(s+="comm="+o.topicWidget.topicModel.owner_id,k.console.info("[S+] Редирект: "+s))}}catch(e){k.console.error("Ошибка (JSON_BLOGTOOLS_COMM): "+e.name+":"+e.message+"\n"+e.stack)}});var a=k.getCK(0);if("TD"==o.parentNode.nodeName){var r=k.ce("td",{class:o.parentNode.className}),l=k.ce("a",{href:e+"//spaces.ru/diary/delete/?id="+t+"&irb526786=1",html:'<img src="'+e+'//spac.me/i/remove.png" alt="" class="p16 m">',id:"SP_PLUS_DELETEBL",title:"Удалить запись",class:o.className,onclick:function(){var o=k.getClassName("div.blog-item__title",null);return o=o?' <b style="color: #0000FF">'+o[0].innerHTML+"</b>":"",k.confirmm("Хотите удалить запись"+o+"?",function(){k.ajax(e+"//spaces.ru/diary/delete/","POST","CK="+a+"&Sure=1&id="+t,function(e){k.setLocation(s)},2)}),!1}});k.inBefore(r,o.parentNode),r.appendChild(l)}else l=k.ce("a",{href:e+"//spaces.ru/diary/delete/?id="+t+"&irb526786=1",html:'<img src="'+e+'//spac.me/i/remove.png" alt="" class="p16 m"> <span class="m">Удалить</span>',id:"SP_PLUS_DELETEBL",title:"Удалить запись",class:o.className,onclick:function(){var o=k.getClassName("div.blog-item__title",null);return o=o?' <b style="color: #0000FF">'+o[0].innerHTML+"</b>":"",k.confirmm("Хотите удалить запись"+o+"?",function(){k.ajax(e+"//spaces.ru/diary/delete/","POST","CK="+a+"&Sure=1&id="+t,function(e){k.setLocation(s)},2)}),!1}}),k.inBefore(l,o),"BR"==o.nextElementSibling.nodeName&&k.insertAfter(k.ce("br",null),l)}}catch(e){k.console.error("Ошибка (BLOGTOOLS): "+e.name+":"+e.message+"\n"+e.stack)}},darkMode:function(e){var o=document.getElementsByTagName("head").item(0),i=k.qs("#SP_PLUS_DARKMODE")||k.ce("style",{id:"SP_PLUS_DARKMODE",type:"text/css"});try{i&&!i.hasAttribute("sp-darkmode")&&e?(i.innerHTML=".link_top-border{border-top: 1px solid #344047;}.f__title{color: #fff;}.b-title_in-window{background: #4d5961 !important; color: #fff;}button, input[type='button'], input[type='submit'], input[type='reset'], .button{border: 1px solid #344047; background: #4d5961;}button:hover, input[type='button']:hover, input[type='submit']:hover, input[type='reset']:hover, .button:hover{background-color: #818f99;}.sp_plus_line > span{background: #404a51 !important;}.sp_plus_line::before{border-bottom: 1px solid #344047 !important;}.sp_plus_text{color: #7a90a0 !important;}div.main{border-left: 1px solid #344047; border-right: 1px solid #344047;}.s_title{background: unset;}#left_nav ul li.li{border-top: unset; border-bottom: unset;}.location-bar a::after, .location-bar__title::after, .location-bar_no-break::after{background: unset;}.carousel-bg{border-bottom: 1px solid #344047;}a.region_link:visited, .author_settings, a.region_link, .t-strong_special .gr{color: #57a3ea !important;}.smiles_menu-back{border-top: 1px solid #344047;}.smiles_menu-header{background: #344047;}.smiles_menu{border: 1px solid #344047;}.smiles_menu-body{background: #4d5961;}.busi_switcher table .active_item, .busi_switcher table a:active{background: #4d5961;}.busi_switcher table a, .busi_switcher table span.active_item{text-shadow: unset;}.busi_switcher table a, .busi_switcher table span.active_item{border: 1px solid #344047;}.file_name, .search_bar, .more_link, .list_item, .edit_title_block, .busi_switcher table a, .edit_button{background: #344047;}.busi_switcher table a:hover{background: #4d5961;}.light_blue_bg{color: #fff;}.vlight_border_bottom{border-bottom: 1px solid #344047;}.bubble-message{color: #fff;}.text-block5, .text-block6, .text-block7{color: #fff;}.replace_widget_wrapper + .list-link, .replace_widget_wrapper + .content-item3{border-top: 1px solid #344047;}.list-link__more-users{background: #404a51; color: #fff;}.toolbar__wrap{background: unset;}.stnd-block.error__msg{background: unset;}.tile{background: #344047; color: #fff;}.select_custom{color: #fff;}.cnt-link:focus{color: #fff; background: #5b676f;}.cnt-link:hover{background: #5b676f;}.hover_bg:hover{background: #818f99;}.suggest__item{background: #7a90a0;}a.service_link, a.service_link span, .service_item{color: #fff;}.t-link_no_underline_block, .t-link_no_underline_block:hover{color: #fff;}.t-link_no_underline:hover, .t-link_no_underline:hover span, .t-link_no_underline_block:hover .t-link_item_hover{color: #57a3ea;}a.region_link:hover, .ewb:hover span, a.title_link:hover span, a.grey_link:hover, span.grey_link a:hover, .list_item div a:hover, .author_link:hover, .edit_label a:hover, a.user_link:hover, a.service_link:hover, a.service_link:hover span, .busi a:hover, a.arrow_link:hover span, .pag .pgar .page:hover, .edit_link, .sub_menu a:hover, a.icolink:hover, .neutral_link span, .tools_block a:hover, .url-btn-blue:hover, .file_comments_info a:hover, .sub_block a:hover, a.name_link:hover, .response:hover, .green_box a:hover span, .ufi a:hover span, .ufi a:hover{color: #57a3ea !important;}a.region_link:hover, .ewb:hover span, a.title_link:hover, a.title_link:hover span, a.grey_link:hover, span.grey_link a:hover, .list_item div a:hover, .author_link:hover, .edit_label a:hover, a.user_link:hover, a.service_link:hover, a.service_link:hover span, .busi a:hover, a.arrow_link:hover span, .pag .pgar .page:hover, .edit_link, .sub_menu a:hover, a.icolink:hover, .neutral_link span, .tools_block a:hover, .url-btn-blue:hover, .file_comments_info a:hover, .sub_block a:hover, a.name_link:hover, .response:hover, .green_box a:hover span, .ufi a:hover span, .ufi a:hover{color: #57a3ea;}.tab_title{color: #fff;}.table__cell_last, .table_no_borders .table__cell{border-right: unset !important;}.service_links_block_top, .pad_t_a{border-top: unset !important;}.block-item__btn-wrap > div > a{border: 1px solid #344047;}.spo_desc{color: #57a3ea;}a.red_link, a.red_link span, .red_item{color: red;}.light_border_top{border-top: 1px solid #344047;}.text-input[readonly]{background: unset !important;}.stnd-link, .stnd-block{color: #fff;}.tabs_line{border-top: 1px solid #344047;}.tabs_block a:hover {background: #818f99;}.tabs_block .tab_item{border: 1px solid #344047; background: #404a51; color: #fff;}.tabs_block .tab_active, .tabs_block .tab_active:hover{background: #4d5961 !important; color: #fff;}.list_item{background: #4d5961 !important;}.bottom_link_block, .search_bar, div.backlink, body .blue_bg{background: #4d5961;}.user__tools_horiz-mode{border: 1px solid #344047;}.form-checkbox_w_descr .form-checkbox__label{color: #fff;}.content-item_info{color: #344047 !important;}.sp_plus_checkbox_el + label{color: #fff !important;}.chb-icons .ico_photo, .ico_photo_gray {background-position: -288px -180px !important;}.sep-chb .form-checkbox, .form-checkbox_dropdown-menu{background: #4d5961; border-bottom: 1px solid #344047;}.drop-down-list_inner .drop-down-label{background: unset;}.darkblue{color: #fff;}.text-block7{color: #fff;}.normal-stnd{color: #fff;}.list-link:hover, .me6d43f28:hover, .list-link__wrap_hover .list-link, .tabs__item:hover, .btn-main:hover, .btn-block:hover, .user__tools-link:hover, a.user__tools-link:hover, .user-tile__btn:hover, a.hover-item:hover, .tile__bottom-link:hover, .btn-link:hover, .stnd-link:hover, .s-city__item:hover, .s-chb:hover, a:hover .bordered, .pgn__link_hover:hover, .links-group_grey .list-link.strong_clicked, .form-checkbox_dropdown-menu:hover, .dropdown-menu .list-link:hover, .dropdown-menu .list-link__wrap_hover .list-link{background: #596671 !important;}.gp-active .gp-content{background-color: #344047;}#gp_playlist{background: #4d5961;}#gp_window{border: unset;}.att_wrap{background: #404a51;}.quote, .blog-item_short_shared{background: #596771; color: #fff; border: 1px solid #344047;}.links-group .stnd-link, .links-group .list-link_arrow{border-bottom: 1px solid #344047;}.soc-separator{background: #4d5961;}.sub-tabs{background: #4d5961;}.message{background: #404a51;}.table__cell_block{background: #4d5961;}.light_blue{background: #404a51;}.user__tools-link{color: #fff !important;}.flot-text{color: #fff !important;}.site-link__wrapper{border-bottom: 1px solid #344047;}.stnd-link_profile, .stnd-block_profile{color: #7a90a0 !important;}.pgn__go, .pgn__go:hover {background-position: -396px -306px !important;}.pgn__search_input:focus{background: #4d5961;}.blue_border_bottom{border-bottom: 1px solid #344047;}.light_blue_bg{background: #404a51; border-bottom: 1px solid #344047;}.t-padd_right{padding-right: unset;}#e0437eeb07, .pag, .search_bar, .bottom_link_block, .list_item, .button_block, .title_block, .sub_menu, .strong_border{border-bottom: 1px solid #344047;}.blue_wrap_block{background: #404a51;}.pgn-wrapper .pgn{border-top: 1px solid #344047;}.sup_block{background: #4d5961;}#main_shadow, #top_info_block{border-left: unset;}.list-link_online{color: #fff !important;}.ico_services {background: url('https://crashmax-off.github.io/darkmode/ico_services.png') no-repeat};.ico_services_nick{background-position: 0 -34px;}.ico_services_stickers{background-position: -34px -34px;}.ico_services_ads{background-position: 0 0;}.ico_services_nick{background-position: 0 -34px;}.ico_services_ghost{background-position: -34px 0;}.ico_services_storage{background-position: -68px 0;}.ico_services_head_icons{background-position: -68px -34px;}.ico{background: url('https://crashmax-off.github.io/darkmode/ico.png') no-repeat;}.ico_darr_left {background-position: -90px -364px;}.ico_darr_right {background-position: -108px -364px;}.ico_rotate_left {background-position: -54px -364px;}.ico_rotate_right {background-position: -72px -364px;}.ico_note {background-position: -198px -364px;}.ico_ok_grey {background-position: -18px -364px;}.ico_speaker{background-position:-72px -256px}.ico_close_btn_invers{background-position: 0 -198px;}.ico_locked{background-position:-378px -36px;}.ico_status {background-position: -128px -180px;}.ico_read_blue {background-position: -270px -292px;}.ico_place {background-position: -396px -162px;}.ico_arr4 {background-position: -414px -223px;}.ico_att {background-position: -144px -310px;}.ico_mess, .chb-icons .form-checkbox_checked .ico_mess {background-position: -198px -274px;}.ico_more_b {background-position: -54px -292px;}.ico_no_results {background-position: -34px -146px;}.ico_users_blue {background-position: -162px -328px;}.ico_shared_grey {background-position: -216px -220px;}.ico_shared_darkblue{background-position: -234px -220px;}.ico_ac_all_grey, .drop-down-list_inner .drop-down-label .ico_ac_all{background-position: -324px -310px;}.ico_filter {background-position: -396px -198px;}.ico_search_people_blue {background-position: -378px -198px;}.ico_mode_froffr {background-position: -71px -180px;}.ico_delete_g {background-position: -324px -180px;}.ico_plane_blue {background-position: -288px -310px;}.ico_alert {background-position: -216px -364px;}.ico_people_darkblue {background-position: -378px -270px;}.ico_locked_large {background-position: -68px -146px;}.ico_a {background-position: -126px -364px;}.ico_plus_blue {background-position: -324px -270px;}.ico_ac_group {background-position: -54px -328px;}.ico_ac_password {background-position: -342px -288px;}.ico_eye {background-position: -252px -310px;}.ico_ac_fof, .ico_ac_fof_black, .ico_ac_fof_darkblue{background-position: -342px -198px;}.ico_ac_friends {background-position: -342px -126px;}.ico_ac_user {background-position: -342px -36px;}.ico_mode_fronl {background-position: -162px -256px;}.ico_extended, .ico_extended_on, .ico_extended_off{background-position: -396px -342px;}.ico_short, .ico_short_on, .ico_short_off{background-position: -396px -324px;}.ico_mobile_blue {background-position: -324px -126px;}.ico_mail_blue {background-position: -324px -108px;}.ico_enter_grey, body a.stnd-link_disabled .ico_enter_grey {background-position: -306px -144px;}a.inl-link:hover .ico_shared_darkblue, .ico_shared_blue{background-position: -252px -18px;}.ico_checked {background-position: -180px -364px;}.ico_upload_blue {background-position: -396px -90px;}.ico_shared_white {background-position: -198px -220px;}.ico_befriends_blue {background-position: -144px -292px;}.ico_ac_friends_darkblue, .ico-menu-toggle.js-clicked .ico_ac_friends, .drop-down-label.js-clicked .ico_ac_friends_black{background-position: -378px -270px;}.ico_delete {background-position: -180px -256px;}.ico_rate_down {background-position: -324px -72px;}.ico_close_btn{background-position: -22px -198px;}.ico_enter_blue {background-position: -306px -126px;}.ico_add_darkblue {background-position: -396px -54px;}.ico_profile, .ico_edit_dim {background-position: 0 -292px;}.site-link__wrapper{background: #4d5961;}.ico_service_b {background-position: -200px -34px;}.ico_career_b {background-position: -200px -68px;}.ico_high_b {background-position: -102px -146px;}.ico_ed_b {background-position: -132px 0;}.ico_up {background-position: -360px 0;}.ico_down {background-position: -360px -36px;}.ico_plane {background-position: -234px -292px;}.ico_read_on {background-position: -324px -18px;}.ico_ac_fof_darkblue, .ico-menu-toggle.js-clicked .ico_ac_fof, .drop-down-label.js-clicked .ico_ac_fof_black{background-position: -342px -234px;}.ico_edit_b, a:hover .ico_edit_darkblue, a:hover .no-text .ico_profile, .link-normal:hover .ico_profile, .inline-link:hover .ico_edit_dim, .link-grey:hover .ico_edit_dim, .link-dim:hover .ico_edit_dim{background-position: -324px -216px;}.block-item{border-bottom: 1px solid #344047; background: #4d5961 !important;}.ico_main_b {background-position: -200px -136px;}.ico_befriends {background-position: -378px -288px;}.ico_man {background-position: -288px -364px;}.ico_woman {background-position: -324px -364px;}.user__tools_horiz-mode .table__cell{border-right: 1px solid #344047;}.text-input:focus{background: #4d5961;}.ico_compass {background-position: -166px -68px;}.s-city__item_light:active, .s-city__item_light.clicked{color: #fff;}.s-city__item_city.clicked, .s-city__item_light.clicked, .s-city__item_country.clicked{background: #4d5961;}.s-city__item_light{color: #fff;}.s-city__item{border-bottom: 1px solid #344047;}.s-city__wrap{background: #4d5961;}.drop-down-label_single.js-clicked, .drop-down-label_single.js-clicked .t, .drop-down-label.js-clicked, .drop-down-label.js-clicked .t{color: #57a3ea !important;}.drop-down-label:hover, .drop-down-label:hover .t, .drop-down-label.js-clicked:hover, .drop-down-label.js-clicked:hover .t{color: #57a3ea !important;}.drop-down-label{color: #fff;}.ico_arr5, .ico_arr_bottom {background-position: -180px -238px;}.ico_search_blue {background-position: -378px -162px;}.b-title__spoiler{background: #404a51;}.attention{background: #4d5961; border: 1px solid #344047;}.ico_add_univer {background-position: 0 -112px;}.ico_add_school {background-position: -68px -112px;}.ico_gifts_blue {background-position: -306px -198px;}.ico_write, body a.stnd-link_disabled .ico_write, body a.stnd-link_disabled:active .ico_write, body .list-link.user__tools-link_disabled .ico_write, body .user__tools-link.user__tools-link_disabled .ico_write{background-position: -324px -90px !important;}.ico_gifts, .stnd-link_disabled:active .ico_gifts, body .user__tools-link.user__tools-link_disabled .ico_gifts{background-position: -306px -180px;}.ico_tort {background-position: -198px -256px;}.ico_add_blue {background-position: -396px -36px;}.ico_ed_middle {background-position: -360px -162px;}.ico_settings_light {background-position: -234px -274px;}.ico_ok_blue {background-position: -116px -198px;}.ico_download, .ico_down_blue {background-position: -170px -198px;}.ico_complaint {background-position: -288px -36px;}.ico_read, body .list-link.user__tools-link_disabled:hover .ico_read, body .user__tools-link.user__tools-link_disabled .ico_read, body a.stnd-link_disabled .ico_read, body a.stnd-link_disabled:active .ico_read {background-position: -306px -292px;}.ico_write, body a.stnd-link_disabled .ico_write, body a.stnd-link_disabled:active .ico_write, body .list-link.user__tools-link_disabled .ico_write, body .user__tools-link.user__tools-link_disabled .ico_write {background-position: -324px -54px;}.ico_befriends_on {background-position: -162px -292px;}.ico_question_grey {background-position: -126px -220px;}.ico_download2_grey {background-position: -234px 0;}.links-group .ico_arr_bottom, .drop-down-label_single.drop-down-label .ico_arr_bottom, .drop-down-list_inner .drop-down-label .ico_arr_bottom, .ico_arr_bottom_grey {background-position: -270px -180px;}.ico_download2_blue {background-position: -206px -198px;}.ico_plus_white {background-position: -360px -108px;}.ico_galoom_white, .ico_galoom {background-position: -198px -346px;}.ico_mail_white {background-position: -324px -90px;}.ico_mymir_white, .soc-link .ico_mymir, .soc-link:active .ico_mymir, .soc-button .ico_mymir {background-position: -162px -346px;}.ico_twitter_white {background-position: -108px -346px;}.ico_fb_white, .soc-link .ico_fb, .soc-link:active .ico_fb, .soc-button .ico_fb {background-position: -180px -346px;}.ico_odnk_white, .soc-link .ico_odnk, .soc-link:active .ico_odnk, .soc-button .ico_odnk {background-position: -144px -346px;}.ico_vk_white, .soc-link .ico_vk, .soc-link:active .ico_vk, .soc-button .ico_vk {background-position: -126px -346px;}.ico_rating {background-position: -36px -220px;}.ico_info {background-position: -234px -180px;}.ico_forum, .chb-icons .form-checkbox_checked .ico_forum {background-position: -144px -274px;}.ico_user {background-position: -234px -72px;}.ico_arrow {background-position: -414px -321px;}.ico_com{background-position: -414px -166px;}.ico_users_group {background-position: -90px -180px;}.ico_user_online {background-position: -162px -220px;}.ico_pause, .playing .p_i_t_pb_image{background-position: -414px -58px;}.ico_reload_gray{background-position: 0 -238px;}.ico_download2{background-position: -188px -198px;}.ico_plus_darkblue, .js-clicked .ico_plus_grey{background-position: -324px -288px;}.ico_player_next{background-position: 0 -364px;}.ico_player_prev{background-position: -234px -90px;}a:hover .ico_lenta_comments, .ico_soo_down, .ico_weather_xlarge, .ico_spacesru{background-position: 0 -66px;}.ico_play, body .p_i_t_pb_image{background-position: -414px -148px;}.ico_ok_active{background-position: -252px -124px;}.ico_arr, .ico_arr2{background-position: -414px -265px;}.ico_arr3{background-position: -414px -237px;}.ico_arr_bottom_white{background-position: -270px -162px;}.location-bar__home-link{background-position: -396px 0;}.ico_reload_darkblue{background-position: -252px -216px;}.ico_remove, body input[type='submit'].delete-btn{background-position: -378px -306px;}.help-block{border-bottom: 1px solid #344047;}.p_i_p_progressLine{background-color: #9ab2cc;}.ico_friends_grey{background-position: -252px -364px;}.ico_settings{background-position: -98px -198px;}.ico_fav, .ico_fav_grey{background-position: -216px -256px;}.ico_more{background-position: -36px -292px;}.ico_fav_on{background-position: -252px -256px;}.ico_add{background-position: -270px -274px;}.ico_history{background-position: -306px 0;}.ico_exit{background-position: -306px -54px;}.ico_plus_grey{background-position: -180px -328px;}.ico_smile{background-position: -396px -126px;}.ico_plus{background-position: -62px -198px;}.ico_arrow-back, .ico_arr11{background-position: -414px -349px;}.ico_upload{background-position: -396px -72px;}.ico_gb{background-position: -126px -256px;}.ico_blog{background-position: -144px -256px;}.ico_game{background-position: -288px -90px;}.ico_photo, .chb-icons .form-checkbox_checked .ico_photo {background-position: -288px -162px;}.ico_music, .chb-icons .form-checkbox_checked .ico_music {background-position: -288px -252px;}.ico_video, .chb-icons .form-checkbox_checked .ico_video {background-position: -36px -274px;}.ico_file, .chb-icons .form-checkbox_checked .ico_file {background-position: -90px -274px;}.ico_comm {background-position: -52px -180px;}.ico_friends {background-position: -306px -234px;}.ico_readers {background-position: -109px -180px;}.ico_readers {background-position: -109px -180px;}.ico_int_people {background-position: -306px -270px;}.ico_add_user{background-position: -166px 0;}.ico_wait {background-position: -252px -198px;}.player_item{color: #fff !important;}.gp-playlist_active{background: #344047 !important;}.stnd_padd{background: #4d5961;}.light_border_bottom{border-bottom: 1px solid #344047; background: #4d5961 !important;}.upper_case{color: #a7b8c6;}.gp-info_wrap{color: #fff;}.gp-content:hover{background-color: #818f99;}.gp-content{background-color: #4D5961;}.user__tools{border-bottom: 1px solid #344047;}.user__details{color: #a7b8c6;}.blog-toolbar{color: #a7b8c6;}.switch__item{background: #344047;}.switch__item_current{background: #4d5961 !important; color: #fff;}.text-input{border: 1px solid #344047 !important; background: #4d5961; color: #fff;}.btn-min{border: 1px solid #344047;}.text-input-wrapper_inline{border: 1px solid #344047;}.tabs__item_disabled, .tabs__item_disabled:active{background: #4d5961 !important;}.dropdown-menu_text{background: #4d5961;}.pgn__button:active, .pgn__button_press, .pgn__button_press:hover, .mail__button:active{color: #7a90a0 !important; background: #344047 !important; -webkit-box-shadow: inset 0px 3px 5px #293238 !important;-moz-box-shadow: inset 0px 3px 5px #293238 !important;box-shadow: inset 0px 3px 5px #293238 !important;}.pgn__search_input{background: #4d5961; border: 1px solid #373f46; -webkit-box-shadow: inset 0px 3px 5px #374047;-moz-box-shadow: inset 0px 3px 5px #374047;box-shadow: inset 0px 3px 5px #374047;}.mail__dialog_message{background: #88dd7b;}.grey{color: #fff !important;}.mail__dialog_answer{background: #8ac2dd;}.mail__dialog_text{color: #000 !important;}.comm_selected .comm{background: #344047;}.system-message_alert{color: #ff6837 !important;}.info-item{color: #fff;}.content-bl{color: #fff;}.e02afd89e1, .list-link{color: #fff;}.b-title__all::before{content: unset;}a:hover .b-title__all{background: #344047;}.file_name, .search_bar, .more_link, .list_item, .edit_title_block, .busi_switcher table a, .edit_button{color: #fff;}.links-group_sections .list-link:hover{color: #fff !important;}.list-link-grey:active, .inl-link.js-clicked, .l-gr .list-link:active, .links-group .list-link:active, .list-link:active .lgrey2, body .links-group .list-link-blue:active{color: #fff !important;}.bubble::after, .user__status::after{border-bottom-color: #404a51;}.bubble, .user__status{background: #404a51; color: #a7b8c6;}#wrap_all{background: #4d5961;}.ico_mail{background: url('https://crashmax-off.github.io/darkmode/ico_mail.png') no-repeat;}.ico_mail_write{background-position: -32px -126px}.ico_mail_restore_grey{background-position: -17px -108px;}.ico_mail_spoiler {background-position: -72px -54px;}.ico_mail_message{background-position: -68px -108px;}.ico_mail_fav_blue{background-position: -90px -18px;}.ico_mail_archive_blue{background-position: -126px -54px;}.ico_mail_spam_blue{background-position: -18px -90px;}.ico_mail_garbage_blue{background-position: -126px 0;}.ico_mail_cog_blue{background-position: -54px -18px;}a.inl-link:hover .ico_cats_city, .ico_cats_city_black, .ico_leads, .ico_mail_quote, #present_link span{background-position: -36px -36px;}.ico_cats_news_black, a:active .ico_cats_news, a.stnd-link_active .ico_cats_news, .ico_cats_news_black, .ico_mail_link{background-position: -18px -72px;}.ico_cats_subculture_black, a:active .ico_cats_subculture, a.stnd-link_active .ico_cats_subculture, .ico_cats_subculture_black, .ico_chat_journal_blue, .ico_mail_color, .pc .voteDownCnt:hover span, .voteDownCnt span.on, .pc .voteDownCnt:hover span.on{background-position: -18px -54px;}.ico_settings_black_blue, .ico_mail_bold, .voteDownCnt span{background-position: -18px 0;}.ico_rules, .ico_mail_italic, .voteUpCnt span{background-position: 0 -18px;}.ico_journal, .ico_mail_underline, #mail_link span{background-position: -36px 0;}.ico_cats_rpg_black, a:active .ico_cats_rpg, a.stnd-link_active .ico_cats_rpg, .ico_cats_rpg_black, .ico_people_in_viktorina, .ico_mail_strike, #bookmark_link span{background-position: 0 -36px;}.ico_mail_code{background-position: -18px -126px;}.ico_mail_background, #comment_link span{background-position: -72px 0;}.ico_mail_picture{background-position: 0 0;}.ico_mail_music{background-position: -90px -36px;}.ico_mail_video{background-position: -108px -52px;}.f__ico_contacts, .ico_files_zip, .ico_mail_file{background-position: -126px -72px;}.ico_mail_spam, .mail__button.disabled:active .ico_mail_spam{background-position: -36px -90px;}.ico_mail_garbage_red{background-position: -108px -88px;}.ico_mail_attach{background-position: -54px -72px;}.ico_attaches{background: url('https://crashmax-off.github.io/darkmode/ico_attaches.png') no-repeat;}.ico_attaches_picture {background-position: -18px -18px;}.ico_attaches_poll {background-position: -36px 0;}.ico_attaches_file {background-position: -18px -36px;}.ico_attaches_music {background-position: 0 -18px;}.ico_attaches_attach{background-position: -18px 0;}#sidebar_wrap{background: #4d5961;}.ico_mail_receive{background-position: -104px -108px;}.ico_mail_archive{background-position: -126px -36px;}.ico_mail_garbage{background-position: -51px -108px;}#left_nav ul li.li a, .s_title{color: #fff;}.s_i_exchange{background-position: -36px -36px !important;}.s_i_love{background-position: 0 -72px;}.s_i_music{background-position: -72px -36px;}.s_i_diary{background-position: -36px 0;}.s_i_community{background-position: 0 -18px;}.s_i_forum{background-position: -36px -54px;}.s_i_chat{background-position: 0 -36px;}.s_i_games{background-position: -54px -18px;}.s_i_announcement{background-position: -72px 0;}.s_i_people{background-position: 0 -54px;}.s_i_guestbook{background-position: 0 -126px;}.s_i_files{background-position: -126px -18px;}.s_i_videos{background-position: -126px -54px;}.s_i_photos{background-position: -126px -90px;}.s_i_city{background-position: -108px -36px;}.s_i_mobiles{background-position: -72px -72px;}.s_i_info{background-position: -90px -18px;}.s_i_favorites{background-position: -72px -126px;}.s_i_friends{background-position: 0 -108px;}.s_i_history{background-position: -36px -126px;}.s_i_links{background-position: -108px -108px;}.s_i_options, .s_i_menu{background-position: -108px -72px;}.s_i_allservices_gray{background-position: -72px -108px;}.s_i_help{background-position: -90px -54px;}.s_i_exit{background-position: -36px -108px;}.left_nav_search_input, .reg_text_input{background: #434b5a; border: 1px solid #232833;}#left_nav ul li.li a:hover{background: #818f99;}.s_title, #left_nav ul li.li a.title_link{color: #fff;}.left_nav_search_input:hover{background: #434b5a;}#main_search_input{color: #c4ccda;}body #left_nav ul li.li a:active {color: #fff; background: #344047; -webkit-box-shadow: inset 0px 3px 5px #192228; -moz-box-shadow: inset 0px 3px 5px #192228; box-shadow: inset 0px 3px 5px #192228;}.left_nav_padding input.search__btn:focus{background: #434b5a;}.main, #logo_panel, .item_head_bg{background: #404a51;}.location-bar{color: #fff; background: #4d5961; -webkit-box-shadow: 0 3px 5px #293238;-moz-box-shadow: 0 3px 5px #293238;box-shadow: 0 3px 5px #293238;}.location-bar::after{background: #4d5961;}.tile-menu__title{color: #fff;}.tile-menu__link{background: #344047; -webkit-box-shadow: 0 3px 5px #293238; -moz-box-shadow: 0 3px 5px #293238; box-shadow: 0 3px 5px #293238;}.pc .tile-menu__link:hover {background: #4d5961}.tile-menu__link:active{background: #344047 !important;-webkit-box-shadow:inset 0 3px 4px #293238;-moz-box-shadow:inset 0 3px 4px #293238;box-shadow:inset 0 3px 4px #293238;}.search__input:focus{background: #434b5a;}.search__input{background: #434b5a; border: 1px solid #232833; color: #fff;}.b-title__link, .b-title__item{color: #fff !important;}.widgets-group, .m44f47fd1, .spoiler_inject::before, .our_spo_inj::before, .content-item, .dropdown-menu_text, .btn-single, .tabs::before, .spaced-group a, .user-tile__similarity-wrapper, .pgn, .shdw, .ma74074b9{-webkit-box-shadow: 0px 3px 5px #293238;-moz-box-shadow: 0px 3px 5px #293238;box-shadow: 0px 3px 5px #293238;}.b-title{background: #344047;}.b-title__link:hover, .header_links_fixer a:hover{background: #4d5961;}.page_fixer{background: #404a51;}.b-title__all{background: #344047;}.carousel-bg{background: #4d5961;}.b-title__all::before, .b-title__edit-link::before{background: #344047;}.carousel-prev .carousel-edges_shadow{left: 10px;}.list-link{background: #4d5961; border-bottom: 1px solid #344047;}.blog-item__author, .blog-item__time, .normal-light{color: #fff;}.list-link:hover, .me6d43f28:hover, .list-link__wrap_hover .list-link, .tabs__item:hover, .btn-main:hover, .btn-block:hover, .user__tools-link:hover, a.user__tools-link:hover, .user-tile__btn:hover, a.hover-item:hover, .tile__bottom-link:hover, .btn-link:hover, .stnd-link:hover, .s-city__item:hover, .s-chb:hover, a:hover .bordered, .pgn__link_hover:hover, .links-group_grey .list-link.strong_clicked, .form-checkbox_dropdown-menu:hover, .dropdown-menu .list-link:hover, .dropdown-menu .list-link__wrap_hover .list-link{background: #818f99;}.list-link-darkblue, .links-group .list-link_arrow, .links-group .list-link-darkblue, .links-group .stnd-link_profile{color: #fff !important;}.list-link-darkblue .cnt{color: #57a3ea;}.wbg{background: #4d5961 !important;}.block-item__descr{color: #fff;}.content-usr{background: #4d5961;-webkit-box-shadow: 0 3px 5px #293238;-moz-box-shadow: 0 3px 5px #293238;box-shadow: 0 3px 5px #293238;}.black{color: #fff;}.table__cell{border-right: 1px solid #344047;}.stnd-link, .stnd-block{color: #fff; background: #4d5961;}.user__tools{border-top: 1px solid #344047;}.list-link_online{-webkit-box-shadow: 0 3px 4px #293238;-moz-box-shadow: 0 3px 4px #293238;box-shadow: 0 3px 4px #293238;}.no-break::before{display: none;}.blog-item__subject, .blog-item__channel, .blog-item_short_shared .black{color: #fff;}.blog-item__title{color: #fff;}.content-bl{background: #4d5961;}#main_page a:visited, a, a.edit_link:visited, a.user_link:visited, .tools_block a, .sub_menu a, .inl-link, .link-stnd, .text-title, .nl a, .link-darkblue, .anketa__rate-link, .info-item__descr a, .info-item__descr-link, .drop-down-label.drop-down-label_spoiler, .t-strong_item, .blog-item__title, .list-link__name, .md77b4724, .f_descr_text, a.arrow_link span, .ufi a span, .response, .url-btn, .edit_widget_title, .ewb span{color: #57a3ea;}.list-link__text{color: #fff;}.mysite-nick{color: #fff;}.text-color, .links-group_important .list-link.clicked{color: #fff !important;}.link-return{color: #57a3ea !important;}.comm{background: #4d5961; border-bottom: 1px solid #344047;}.text, .text_anketa{color: #fff;}.spoiler_inject, .our_spo_inj{background: #404a51;}.dropdown-menu__wrap{background: #344047; -webkit-box-shadow: 0px 3px 5px #293238;-moz-box-shadow: 0px 3px 5px #293238;box-shadow: 0px 3px 5px #293238;}.links-group_grey .list-link, .links-group_grey .stnd-link{color: #fff !important;}.list .stnd-link{border-bottom: 1px solid #344047;}.tabs{background: #4d5961;}.tabs__link{color: #fff;}.list-link:active, .me6d43f28:active, .soc-links .list-link_soc.clicked, .soc-links .list-link_soc:active, .dropdown-menu .list-link:active, .user__tools-link:active, a.user__tools-link:active, a.user__tools-link.clicked, button.user__tools-link:active, .tabs__item:active, .btn-link:active, .user-tile__btn:active, .clicked, .tabs__item.clicked, .stnd-link.clicked, .header_links_fixer a:active, .clicked .stnd-link, .list-link.clicked, .dropdown-menu .list-link.clicked, label.user__tools-link.clicked, label.user__tools-link.clicked:hover, a.hover-item:active, .js-clicked .btn-single, .js-clicked .btn-single:hover, a.hover-item.clicked, .stnd-link:active, .stnd-link.attention_block:active, body .stnd-link_active, body .stnd-link_active:hover, .s-chb:active, .tile__bottom-link:active, .s-city__item:active, .c-letter__more-btn, .form-checkbox_dropdown-menu:active, .pgn__link_hover:active, .b-title__link:active, .s-city__item_city.clicked:active, .s-city__item_light.clicked:active, .s-city__item_country.clicked:active, .dropdown-menu .list-link.strong_clicked_active, .btn-main:active, .btn-block:active, a.item_clicked, a.item_clicked:hover, .js-dd_menu_link.strong_clicked, .user-tile__btn.js-clicked{background: #344047;-webkit-box-shadow: inset 0px 3px 5px #293238;-moz-box-shadow: inset 0px 3px 5px #293238;box-shadow: inset 0px 3px 5px #293238;}.tabs .clicked::before{display: none;}.content-widget{background: #404a51;}.cnt_tabs, .cnt_title, .sub-title .cnt_title{border: 1px solid #becedd; color: #57a3ea;}.drop-down-label:hover, .drop-down-label:hover .t, .drop-down-label.js-clicked:hover, .drop-down-label.js-clicked:hover .t{color: #61a961;}.static-bl{background: #4d5961; border-bottom: 1px solid #344047; color: #fff;}.bg-white, .dropdown-menu .list-link{background: #4d5961;}.sep-item{border-bottom: 2px solid #344047;}.table__cell_block{border-bottom: 1px solid #344047;}.btn-link{border: 1px solid #344047; background: #404a51;}.anketa__rate-cnt, .sub-title{color: #fff;}.sub-title .cnt, .list-link-darkblue:active .cnt, .stnd-link_profile:active .cnt{color: #57a3ea; border: 1px solid #becedd;}.btn-single{background: #4d5961; color: #fff;}.list-link-blue, .stnd-link_important, .links-group .stnd-link_arr.list-link-blue{color: #fff !important;}.block-item{background: #404a51;}.pgn{background: #4d5961;}.table_top_border{border-top: 1px solid #344047 !important;}.oh break-word{color: #fff;}.content, .list_spaced{background: #4d5961;}.content-item3{color: #fff;}.form-checkbox_full, .f-c_fll .form-checkbox{border-bottom: 1px solid #344047;}.user__tools-link{background: #4d5961;}.list-link-blue, .stnd-link_important, .links-group .stnd-link_arr.list-link-blue{color: #fff;}.stnd_padd{color: #fff;}.form-checkbox_checked{color: #fff !important;}.content-bl__sep, .content-bl__sep2, .text_anketa_sep{border-bottom: 1px solid #344047;}.action-bar{border-top: 1px solid #344047;}button.btn-main, input[type='submit'].btn-main, .btn-main:visited, .btn-main, .btn-block{background: #4d5961; color: #fff;}.light_bg{background: #404a51;}.toolbar td, .toolbar .hide td:last-child{border-right: 1px solid #344047;}.toolbar__wrap table{border: 1px solid #344047;}.toolbar .list-link{border-bottom: 1px solid #344047;}.text_distinguish{color: #57a3ea !important;}.green, .green_link, .link-green, a.green_link span, #e0437eeb07 a{color: #56e456;}.mail__button{background: #4d5961 !important;}.mail__button.disabled, .mail__button.disabled:focus, .mail__button.disabled:hover{background: #4d5961 !important; color: #fff !important; opacity: unset;}.mail__message_text.m_my_not_read{background: #344047;}.pgn__button:hover, .mail__button:hover{background: #4d5961 !important; color: #fff;}.pgn__button, .mail__button{color: #fff;}.color-black-light{color: #fff;}.content-bl__top_sep{border-top: 1px solid #344047;}.b-title__edit-link::after, .b-title__edit-link::before{background: #344047;}.ico_cats{background: url('https://crashmax-off.github.io/darkmode/ico_cats.png') no-repeat;}.ico_cats_news, .ico_cats_news_black{background-position: -80px -54px;}.ico_cats_game, .ico_cats_game_black{background-position: -36px -178px;}.ico_cats_humor, .ico_cats_humor_black{background-position: -134px 0;}.ico_cats_programm, .ico_cats_programm_black{background-position: 0 -144px;}.ico_cats_internet, .ico_cats_internet_black{background-position: -18px -90px;}.ico_cats_science, .ico_cats_science_black{background-position: -134px -72px;}.ico_cats_auto, .ico_cats_auto_black{background-position: -169px -96px;}.ico_cats_sport, .ico_cats_sport_black{background-position: -116px 0;}.ico_cats_business, .ico_cats_business_black{background-position: -144px -144px;}.ico_cats_hobby, .ico_cats_hobby_black{background-position: -126px -144px;}.ico_cats_video, .ico_cats_cinema, .ico_cats_cinema_black{background-position: -152px -36px;}.ico_cats_music, .ico_cats_music_black{background-position: -17px -126px;}.ico_cats_design, .ico_cats_design_black{background-position: -34px -126px;}.ico_cats_book, .ico_cats_book_black{background-position: -159px -160px;}.ico_cats_philosophy, .ico_cats_philosophy_black{background-position: -152px -90px;}.ico_cats_relationship, .ico_cats_relationship_black{background-position: 0 -108px;}.ico_cats_politic, .ico_cats_politic_black{background-position: -72px -144px;}.ico_cats_education, .ico_cats_education_black{background-position: -134px -36px;}.ico_cats_remont, .ico_cats_remont_black{background-position: -36px -72px;}.ico_cats_remont, .ico_cats_remont_black{background-position: -36px -72px;}.ico_cats_animal, .ico_cats_animal_black{background-position: -62px -18px;}.ico_cats_cook, .ico_cats_cook_black{background-position: -187px 0;}.ico_cats_moda, .ico_cats_moda_black{background-position: -98px 0;}.ico_cats_health, .ico_cats_health_black{background-position: -54px -108px;}.ico_cats_travel, .ico_cats_travel_black{background-position: -98px -54px;}.ico_cats_spaces, .ico_cats_spaces_black{background-position: -33px -160px;}.ico_cats_other, .ico_cats_other_black{background-position: -44px -18px;}.ico_cats_dating, .ico_cats_dating_black{background-position: -169px -32px;}.ico_cats_rpg, .ico_cats_rpg_black{background-position: -80px -18px;}.ico_cats_house, .ico_cats_house_black{background-position: -124px -126px;}.ico_cats_sex, .ico_cats_sex_black{background-position: -87px -160px;}.ico_cats_photo, .ico_cats_photo_black{background-position: -116px -54px;}.ico_cats_profession, .ico_cats_profession_black{background-position: -169px -141px;}.ico_cats_subculture, .ico_cats_subculture_black{background-position: -54px -54px;}.ico_cats_city, .ico_cats_city_black{background-position: -18px -36px;}.ico_cats_gadget, .ico_cats_gadget_black{background-position: -187px -88px;}.ico_chat{background: url('https://crashmax-off.github.io/darkmode/ico_chat.png') no-repeat;}.ico_journal, .ico_mail_underline, #mail_link span{background-position: -36px 0;}.ico_rules, .ico_mail_italic, .voteUpCnt span{background-position: 0 -18px;}.ico_settings_black_blue, .ico_mail_bold, .voteDownCnt span{background-position: -18px 0;}.ico_lock_open, #shared_link span.on{background-position: -54px -36px;}.ico_lock, #shared_link span{background-position: -54px -18px;}.ico_rings{background-position: 0 -54px;}",i.setAttribute("sp-darkmode","1"),o.appendChild(i)):!g.darkMode&&i&&i.hasAttribute("sp-darkmode")&&!e&&(i.removeAttribute("sp-darkmode"),o.removeChild(i))}catch(e){k.console.error("Ошибка (DARKMODE): "+e.name+":"+e.message+"\n"+e.stack)}},darkModeNav:function(e){try{var o=document.getElementsByTagName("head").item(0),i=k.qs("#SP_PLUS_DARKMODE_NAV")||k.ce("style",{id:"SP_PLUS_DARKMODE_NAV",type:"text/css"}),t=k.ce("div",{id:"SP_DARKMODE_WRAP",style:"padding-left: 7px; margin-left: 7px; border-left: 5px solid #92BEE2;"}),n=k.ce("input",{type:"checkbox",id:"sp_darkMode_nav",class:"sp_plus_checkbox_el",checked:g.darkModeNav,onclick:function(e){g.darkModeNav=e.target.checked;var t=JSON.stringify(g);k.setCookie("SP_PLUS_SET",t,null),i&&!i.hasAttribute("sp-darkmode-nav")&&e?(i.innerHTML="#left_nav{top: 1px;}#navi, .sidebar-logo, .unauth_header, .horiz-placeholder, .horiz-menu_bottom{color: #fff; background: #344047; border-bottom: 1px solid #344047; border-left: 1px solid #344047; border-right: 1px solid #344047;}",i.setAttribute("sp-darkmode-nav","1"),o.appendChild(i)):!g.darkModeNav&&i&&i.hasAttribute("sp-darkmode-nav")&&!e&&(i.removeAttribute("sp-darkmode-nav"),o.removeChild(i))}}),s=k.ce("label",{attr:{for:"sp_darkMode_nav"},html:"- Изменить шапку",style:"font-size: small;"});t.appendChild(n),t.appendChild(s),k.insertAfter(t,e.nextElementSibling)}catch(e){k.console.error("Ошибка (DARKMODE-NAV): "+e.name+":"+e.message+"\n"+e.stack)}},setStyle:function(){var o=k.service(1)||"777",i=document.getElementsByTagName("head").item(0),t=k.qs("#SP_PLUS_INJSTYLE")||k.ce("style",{id:"SP_PLUS_INJSTYLE",type:"text/css"});t.innerHTML=".sp_plus_alert_y{-webkit-box-shadow:#888 0 5px 90px 0;border:1px solid #e2b709;border-radius:5px;box-shadow:#888 0 5px 90px 0;color:#404040;display:block;font-family:sans-serif;font-weight:700;height:auto;padding:17px;position:fixed;text-align:center;margin-left:-156px;top:10%;left:50%;max-height:80%;width:275px;z-index:11000;background:#ffe57e;}.null{display:none !important}.sp_plus_alertg,.sp_plus_small{background-color:#ddebf7}.sp_plus_small{margin:2px;color:#000;display:block;padding:3px;border-radius:2px}.sp_plus_small img{height:auto!important}.sp_plus_a{text-decoration:none!important;border-bottom:1px dashed}.sp_plus_alertr{background-color:#f9e1d9;color:#ff6837}.sp_plus_alertg,.sp_plus_alertr{background-clip:border-box;background-image:none;background-origin:padding-box;box-shadow:rgba(57,83,135,.3) 0 3px 5px 0;display:block;padding:10px;position:relative;font-size:13px}.sp_plus_ico_alert,.sp_plus_ico_del,.sp_plus_ico_info,.sp_plus_ico_okb,.sp_plus_ico_fav_off,.sp_plus_ico_fav_on{background-color:transparent;background-image:url("+e+"//spac.me/i/ico.png?r="+o+");cursor:pointer;display:inline-block;height:16px;margin-bottom:2px;margin-right:4px;vertical-align:middle;text-align:center;width:16px}.sp_plus_ico_del{background-position:-180px -256px}.sp_plus_ico_okb{background-position:-116px -198px}.sp_plus_ico_alert{background-position:-108px -364px;cursor:default}.sp_plus_ico_info{background-position:-142px -52px;cursor:default}.sp_plus_ico_fav_off{background-position:-216px -256px}.sp_plus_ico_fav_on{background-position:-252px -256px}.sp_plus_button{cursor:pointer;background:#fff}.sp_plus_button:hover{background:#ecf5fd}.sp_plus_checkbox+label,.sp_plus_checkbox_el+label{position:relative;overflow:hidden;cursor:pointer;text-decoration:none!important}.sp_plus_checkbox+label{margin-left:5px;padding:0 4px 0 4px;vertical-align:top;width:16px;height:16px;display:inline-block}.sp_plus_checkbox_el+label{color:grey;padding:12px 5px 12px 25px}.sp_plus_checkbox+label:before,.sp_plus_checkbox_el+label:before{position:absolute;display:inline-block;content:'';background-position:-72px -220px;width:16px;height:16px;background-color:transparent;background-image:url("+e+"//spac.me/i/ico.png?r="+o+")}.sp_plus_checkbox_el+label:before{left:3px;top:12px}.sp_plus_checkbox+label:before{top:8px;margin-top:-8px}.sp_plus_checkbox_el:checked+label{color:#323232}.sp_plus_checkbox:checked+label:before,.sp_plus_checkbox_el:checked+label:before{background-position:-252px -108px}.sp_plus_checkbox,.sp_plus_checkbox_el{position:absolute;left:-10000px}.sp_plus_line>span{background:#fff;padding:0 5px;position:relative;margin:0 10px;display:inline-block}.sp_plus_line:before{content:'';display:block;border-bottom:1px solid #cdd4e1;left:0;right:0;top:50%;position:absolute}.sp_plus_line{text-align: center;position: relative;font-weight: 700;}.sp_plus_text{color: #395387;}.sp_plus_liness{border-top: 1px solid #344047 !important;}",g.bodystyle&&(g.bodystyle.url&&g.bodystyle.urlchecked&&(t.innerHTML+="body,#main_wrap{background-image:url("+g.bodystyle.url+")}"),g.bodystyle.color&&g.bodystyle.colorchecked&&(t.innerHTML+="body,#main_wrap{background-color:"+g.bodystyle.color+"}")),i.appendChild(t)},start:function(){if(g.blocked&&k.bannedTools(),g.comments&&k.comments(),g.blogsd&&k.blogsDelete(),g.readersd&&k.readersDelete(),g.online&&k.online(),g.ads&&k.adsRemove(),g.favorite&&k.favorite(),g.friendsOn&&k.friendsOnline(1),g.gifts&&k.gifts(),g.rscroll&&k.scrollMove(1),g.hrightbar&&k.hiddenRightbar(1),g.coins&&k.coins(),g.karma&&k.karmaAccept(),g.rurl&&k.redirectURL(),g.fileTools&&k.blogTools(),g.darkMode&&k.darkMode(1),g.myEvents&&k.events(),g.isOnline&&k.isOnlineSupport(0),g.playerdn)k.playerDown();else if(!g.playerdn&&p>=0){p=-1;var e=k.qs("#SP_MUSIC_DOWN");e&&k.remove(e)}k.settings()},init:function(){k.readSettings(),k.start(),setInterval(function(){k.start()},100),k.setStyle()}}).init()}();
